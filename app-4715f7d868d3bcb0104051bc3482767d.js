(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?t():'function'==typeof define&&define.amd?define(t):t()})(this,function(){'use strict';function e(e,t){if(null===e||e===void 0)throw new Error(t);return e}function t(e='unreachable'){return new Error(e)}function n(e,t){if(!e)throw new Error(t||'assertion failure')}function a(e){for(let t,n=1;n<arguments.length;n++){if(t=arguments[n],null===t||'object'!=typeof t)continue;let a=je(t);for(let n,s=0;s<a.length;s++)n=a[s],e[n]=t[n]}return e}function s(e){let t=Array(e);for(let n=0;n<e;n++)t[n]=null;return t}function i(e){return e._guid=++we}function r(e){return e._guid||i(e)}function o(){return Object.create(null)}function d(e){let t=qe.length;qe.push((e)=>e.value()),$e.push((e,t)=>e.validate(t)),e.id=t}function l({tag:e}){return e===tt}function p(e){return e===tt}function c(e){let t=[];for(let n,a=0,s=e.length;a<s;a++){if(n=e[a].tag,n===nt)return nt;n===tt||t.push(n)}return f(t)}function u(e){let t=[],n=e.head();for(;null!==n;){let a=n.tag;if(a===nt)return nt;a!==tt&&t.push(a),n=e.nextNode(n)}return f(t)}function m(e){let t=[];for(let n,a=0,s=e.length;a<s;a++){if(n=e[a],n===nt)return nt;n===tt||t.push(n)}return f(t)}function f(e){switch(e.length){case 0:return tt;case 1:return e[0];case 2:return rt.create(e[0],e[1]);default:return ot.create(e);}}function g(e){return e!==ct}function h(...e){let t=e[0],n=e[1],a=e[2];if('string'==typeof t)return function(t,n,a){return y(t,n,a,e)};return a?y(t,n,a,[]):void b(t,n)}function y(e,t,n,a){let s=k(e);return s.trackedProperties[t]=!0,s.trackedPropertyDependencies[t]=a||[],{enumerable:!0,configurable:!1,get:n.get,set:function(){k(this).dirtyableTagFor(t).inner.dirty(),n.set.apply(this,arguments),St()}}}function b(e,t){let n,a=Symbol(t),s=k(e);s.trackedProperties[t]=!0,e[t]!==void 0&&(n=e[t]),Object.defineProperty(e,t,{configurable:!0,get(){return this[a]},set(e){k(this).dirtyableTagFor(t).inner.dirty(),this[a]=e,St()}})}function v(e,t,n){let a=[e.dirtyableTagFor(t)];if(n&&n.length)for(let t=0;t<n.length;t++)a.push(e.tagFor(n[t]));return m(a)}function k(e){let t=e[vt];return t&&S(e,vt)?t:e[vt]=new bt(t)}function S(e,t){return kt.call(e,t)}function A(e,t){throw At.for(e,t)}function C(e,t,n=A){if('object'==typeof e&&e){let n=k(e);return n.tagFor(t)}return tt}function x(e){return e[Pt]}function T(e,t){e[Pt]=t}function O(e){return'function'==typeof e.toString?e+'':''}function P(e){return function(t){return Array.isArray(t)&&t[0]===e}}function B(e,t,n){let a=e[1],s=e[2],i=e[3];D(s,n),i?n.dynamicAttr(a,i,t):n.dynamicAttr(a,null,t)}function D(e,t){Array.isArray(e)?qt.compile(e,t):t.pushPrimitiveReference(e)}function N(e=new en,t=new nn){return e.add('if',(e,t,n,a,s)=>{if(!e||1!==e.length)throw new Error(`SYNTAX ERROR: #if requires a single argument`);s.startLabels(),s.pushFrame(),s.returnTo('END'),D(e[0],s),s.toBoolean(),s.enter(1),s.jumpUnless('ELSE'),s.invokeStaticBlock(n),a?(s.jump('EXIT'),s.label('ELSE'),s.invokeStaticBlock(a),s.label('EXIT'),s.exit(),s.return()):(s.label('ELSE'),s.exit(),s.return()),s.label('END'),s.popFrame(),s.stopLabels()}),e.add('unless',(e,t,n,a,s)=>{if(!e||1!==e.length)throw new Error(`SYNTAX ERROR: #unless requires a single argument`);s.startLabels(),s.pushFrame(),s.returnTo('END'),D(e[0],s),s.toBoolean(),s.enter(1),s.jumpIf('ELSE'),s.invokeStaticBlock(n),a?(s.jump('EXIT'),s.label('ELSE'),s.invokeStaticBlock(a),s.label('EXIT'),s.exit(),s.return()):(s.label('ELSE'),s.exit(),s.return()),s.label('END'),s.popFrame(),s.stopLabels()}),e.add('with',(e,t,n,a,s)=>{if(!e||1!==e.length)throw new Error(`SYNTAX ERROR: #with requires a single argument`);s.startLabels(),s.pushFrame(),s.returnTo('END'),D(e[0],s),s.dup(),s.toBoolean(),s.enter(2),s.jumpUnless('ELSE'),s.invokeStaticBlock(n,1),a?(s.jump('EXIT'),s.label('ELSE'),s.invokeStaticBlock(a),s.label('EXIT'),s.exit(),s.return()):(s.label('ELSE'),s.exit(),s.return()),s.label('END'),s.popFrame(),s.stopLabels()}),e.add('each',(e,t,n,a,s)=>{s.startLabels(),s.pushFrame(),s.returnTo('END'),t&&'key'===t[0][0]?D(t[1][0],s):s.pushPrimitiveReference(null),D(e[0],s),s.enter(2),s.putIterator(),s.jumpUnless('ELSE'),s.pushFrame(),s.returnTo('ITER'),s.dup(It.fp,1),s.enterList('BODY'),s.label('ITER'),s.iterate('BREAK'),s.label('BODY'),s.invokeStaticBlock(n,2),s.pop(2),s.exit(),s.return(),s.label('BREAK'),s.exitList(),s.popFrame(),a?(s.jump('EXIT'),s.label('ELSE'),s.invokeStaticBlock(a),s.label('EXIT'),s.exit(),s.return()):(s.label('ELSE'),s.exit(),s.return()),s.label('END'),s.popFrame(),s.stopLabels()}),e.add('in-element',(e,t,n,a,s)=>{if(!e||1!==e.length)throw new Error(`SYNTAX ERROR: #in-element requires a single argument`);s.startLabels(),s.pushFrame(),s.returnTo('END');let r=t[0],o=t[1];for(let d,l=0;l<r.length;l++)if(d=r[l],'nextSibling'===d||'guid'===d)D(o[l],s);else throw new Error(`SYNTAX ERROR: #in-element does not take a \`${r[0]}\` option`);D(e[0],s),s.dup(),s.enter(4),s.jumpUnless('ELSE'),s.pushRemoteElement(),s.invokeStaticBlock(n),s.popRemoteElement(),s.label('ELSE'),s.exit(),s.return(),s.label('END'),s.popFrame(),s.stopLabels()}),e.add('-with-dynamic-vars',(e,t,n,a,s)=>{if(t){let e=t[0],a=t[1];s.compileParams(a),s.pushDynamicScope(),s.bindDynamicScope(e),s.invokeStaticBlock(n),s.popDynamicScope()}else s.invokeStaticBlock(n)}),e.add('component',(e,t,n,a,s)=>{let i=e[0],r=e.slice(1);s.dynamicComponent(i,r,t,!0,n,a)}),t.add('component',(e,t,n,a)=>{let s=t[0],i=t.slice(1);return a.dynamicComponent(s,i,n,!0,null,null),!0}),{blocks:e,inlines:t}}function _(e,t){Zt.compile(e,t)}function I(e){return!!(e&&e[An])}function L(e,t,n){let a=e.lookupComponent(t,n);return!1,a}function M(e,t){return!1===t.getCapabilities(e).dynamicLayout}function H(e,t){return!0===t.getCapabilities(e).dynamicLayout}function R(e){return j(e)?'':e+''}function F(e){return j(e)?'':W(e)?e:w(e)?e.toHTML():z(e)?e:e+''}function j(e){return null===e||e===void 0||'function'!=typeof e.toString}function w(e){return'object'==typeof e&&null!==e&&'function'==typeof e.toHTML}function z(e){return'object'==typeof e&&null!==e&&'number'==typeof e.nodeType}function V(e){return z(e)&&11===e.nodeType}function W(e){return'string'==typeof e}function U(e,t,n){return new Vn(e,t,n)}function G(e,t){return new Wn(e,t)}function K(e,t){let n=e.parentElement(),a=e.firstNode(),s=e.lastNode(),i=a;for(;i;){let e=i.nextSibling;if(n.insertBefore(i,t),i===s)return e;i=e}return null}function X(e){let t=e.parentElement(),n=e.firstNode(),a=e.lastNode(),s=n;for(;s;){let e=s.nextSibling;if(t.removeChild(s),s===a)return e;s=e}return null}function Y(e,t,n){if(!e)return t;if(!Z(e,n))return t;let a=e.createElement('div');return class extends t{insertHTMLBefore(e,t,s){return null===s||''===s?super.insertHTMLBefore(e,t,s):e.namespaceURI===n?Q(e,a,s,t):super.insertHTMLBefore(e,t,s)}}}function Q(e,t,n,a){t.innerHTML='<svg>'+n+'</svg>';var s=$(t.firstChild,e,a);let i=s[0],r=s[1];return new Vn(e,i,r)}function Z(e,t){let n=e.createElementNS(t,'svg');try{n.insertAdjacentHTML('beforeend','<circle></circle>')}catch(t){}finally{return 1===n.childNodes.length&&n.firstChild.namespaceURI===Un?!1:!0}}function J(e,t){return e?q(e)?class extends t{constructor(e){super(e),this.uselessComment=e.createComment('')}insertHTMLBefore(e,t,n){if(null===n)return super.insertHTMLBefore(e,t,n);let a=!1,s=t?t.previousSibling:e.lastChild;s&&s instanceof Text&&(a=!0,e.insertBefore(this.uselessComment,t));let i=super.insertHTMLBefore(e,t,n);return a&&e.removeChild(this.uselessComment),i}}:t:t}function q(e){let t=e.createElement('div');return t.innerHTML='first',t.insertAdjacentHTML('beforeend','second'),2!==t.childNodes.length}function $(e,t,n){let a=e.firstChild,s=null,i=a;for(;i;)s=i,i=i.nextSibling,t.insertBefore(s,n);return[a,s]}function ee(e,t,n,a){let s,i=t,r=e,o=n,d=o?o.previousSibling:i.lastChild;if(null===a||''===a)return new Vn(i,null,null);null===o?(i.insertAdjacentHTML('beforeend',a),s=i.lastChild):o instanceof HTMLElement?(o.insertAdjacentHTML('beforebegin',a),s=o.previousSibling):(i.insertBefore(r,o),r.insertAdjacentHTML('beforebegin',a),s=r.previousSibling,i.removeChild(r));let l=d?d.nextSibling:i.firstChild;return new Vn(i,l,s)}function te(e,t){return-1!==e.indexOf(t)}function ne(e,t){return(null===e||te(ta,e))&&te(aa,t)}function ae(e,t){return null!==e&&te(na,e)&&te(sa,t)}function se(e,t){return ne(e,t)||ae(e,t)}function ie(e,t,n,a){let s=null;if(null===a||a===void 0)return a;if(w(a))return a.toHTML();s=t?t.tagName.toUpperCase():null;let i=R(a);if(ne(s,n)){let t=e.protocolForURL(i);if(te(ea,t))return`unsafe:${i}`}return ae(s,n)?`unsafe:${i}`:i}function re(e,t){let n,a;if(t in e)a=t,n='prop';else{let s=t.toLowerCase();s in e?(n='prop',a=s):(n='attr',a=t)}return'prop'===n&&('style'===a.toLowerCase()||oe(e.tagName,a))&&(n='attr'),{normalized:a,type:n}}function oe(e,t){let n=ia[e.toUpperCase()];return n&&n[t.toLowerCase()]||!1}function de(e,t){let n=e.tagName,a=e.namespaceURI;if(a===Gn)return le(n,t);var s=re(e,t);let i=s.type,r=s.normalized;return'attr'===i?le(n,r):pe(n,r)}function le(e,t){return se(e,t)?pa:oa}function pe(e,t){return se(e,t)?la:ue(e,t)?ca:ce(e,t)?ua:da}function ce(e,t){return'OPTION'===e&&'selected'===t}function ue(e,t){return('INPUT'===e||'TEXTAREA'===e)&&'value'===t}function me(e){return!1===e||void 0===e||null===e||'undefined'==typeof e.toString?null:!0===e?'':'function'==typeof e?null:e+''}function fe(e,t){return xa.forInitialRender(e,t)}function ge({id:e,meta:t,block:n}){let s,i=e||`client-${ja++}`;return{id:i,meta:t,create:(e,r)=>{let o=r?a({},r,t):t;return s||(s=JSON.parse(n)),new wa(e,{id:i,block:s,referrer:o})}}}function he(e,t,n){let s=e.block,i=e.referrer,r=s.hasEval,o=s.symbols,d=a({},t,{asPartial:n,referrer:i});return new sn(s.statements,e,d,{referrer:i,hasEval:r,symbols:o})}function ye(){}function be(e){return-1===e.indexOf(':')}function ve(e,t,n){if(e instanceof Uint16Array){if(e.slice!==void 0)return e.slice(t,n).buffer;let a=new Uint16Array(n);for(;t<n;t++)a[t]=e[t];return a.buffer}return null}function ke(e,t){let n=e.getSelf(),a=t.capture(),s=a.positional.at(0).value();return'function'!=typeof s&&Se(s,a.positional.at(0)),new Ja(function(...e){let t=a.positional.value();t.shift(),t.push(...e),s.apply(n&&n.value(),t)})}function Se(e,t){let n=Ae(t);throw new Error(`You tried to create an action with the {{action}} helper, but the first argument ${n}was ${typeof e} instead of a function.`)}function Ae(e){let t,n,a='';return null===e||void 0===e?a:('parent'in e&&'property'in e?(t=e.parent.value(),n=e.property):'_parentValue'in e&&'_propertyKey'in e&&(t=e._parentValue,n=e._propertyKey),void 0!==n&&(a+=`('${n}' on ${Ce(t)}) `),a)}function Ce(e){let t=typeof e;if(null===e||e===void 0)return t;if('number'==t||'boolean'==t)return e.toString();if(e.debugName)return e.debugName;try{return JSON.stringify(e)}catch(t){}return e.toString()}function xe(e){var t=e.split(':');let n=t[0],a=t[1];return!!(n&&a&&0===a.indexOf('/')&&3<a.split('/').length)}function Ee(e){return e.rootName!==void 0&&e.collection!==void 0&&e.name!==void 0&&e.type!==void 0}function Te(e){let t=e.type,n=Oe(e);return n?t+':'+n:t}function Oe(e){let t=[];if(e.rootName&&t.push(e.rootName),e.collection&&t.push(e.collection),e.namespace&&t.push(e.namespace),e.name&&t.push(e.name),0<t.length){let n=t.join('/');return Ee(e)&&(n='/'+n),n}}function Pe(e){let t={};if(-1<e.indexOf(':')){var n=e.split(':');let a=n[0],s=n[1];t.type=a;let i;0===s.indexOf('/')?(i=s.substr(1).split('/'),t.rootName=i.shift(),t.collection=i.shift()):i=s.split('/'),0<i.length&&(t.name=i.pop(),0<i.length&&(t.namespace=i.join('/')))}else t.type=e;return t}function Be(e,t){if(!t)throw new Error('Assertion Failed: '+e)}function De(e){let t=e.namespace,n=e.collection,a=t.lastIndexOf('/-');if(-1<a){a+=2;let e=t.indexOf('/',a);n=t.slice(a,-1<e?e:void 0)}return n}function Ne(e,t){return Math.random()*(t-e+1)+e}function _e(e,t,n,a){let s=Ne(e,t);for(;s>n&&s<a;)s=Math.random()*(t-e+1)+e;return s}function Ie(e,t,n){return{x:(e.x-t.x)*Re(n)-(e.y-t.y)*He(n)+t.x,y:(e.x-t.x)*He(n)+(e.y-t.y)*Re(n)+t.y}}function Le(e,t){var n=Math.round;let a=[];for(let s=0;s<e;s++)a[s]={x:(-He(360/e*s*Me/180)+n(2*Math.random()-1)*Math.random()/3)*t,y:(-Re(360/e*s*Me/180)+n(2*Math.random()-1)*Math.random()/3)*t};return a}var Me=Math.PI,He=Math.sin,Re=Math.cos,Fe=Math.max;const je=Object.keys;let we=0;class ze{constructor(){this.dict=o()}add(e){return'string'==typeof e?this.dict[e]=e:this.dict[r(e)]=e,this}delete(e){'string'==typeof e?delete this.dict[e]:e._guid&&delete this.dict[e._guid]}}class Ve{constructor(){this.stack=[],this.current=null}get size(){return this.stack.length}push(e){this.current=e,this.stack.push(e)}pop(){let e=this.stack.pop(),t=this.stack.length;return this.current=0===t?null:this.stack[t-1],void 0===e?null:e}isEmpty(){return 0===this.stack.length}}class We{constructor(e){this.next=null,this.prev=null,this.value=e}}class Ue{constructor(){this.clear()}head(){return this._head}tail(){return this._tail}clear(){this._head=this._tail=null}toArray(){let e=[];return this.forEachNode((t)=>e.push(t)),e}nextNode(e){return e.next}forEachNode(e){for(let t=this._head;null!==t;)e(t),t=t.next}insertBefore(e,t=null){return null===t?this.append(e):(t.prev?t.prev.next=e:this._head=e,e.prev=t.prev,e.next=t,t.prev=e,e)}append(e){let t=this._tail;return t?(t.next=e,e.prev=t,e.next=null):this._head=e,this._tail=e}remove(e){return e.prev?e.prev.next=e.next:this._head=e.next,e.next?e.next.prev=e.prev:this._tail=e.prev,e}}class Ge{constructor(e,t){this._head=e,this._tail=t}forEachNode(e){for(let t=this._head;null!==t;)e(t),t=this.nextNode(t)}head(){return this._head}tail(){return this._tail}toArray(){let e=[];return this.forEachNode((t)=>e.push(t)),e}nextNode(e){return e===this._tail?null:e.next}}const Ke=new Ge(null,null),Xe=Object.freeze([]),Ye=0,Qe=1,Ze=NaN;class Je{validate(e){return this.value()===e}}Je.id=0;const qe=[],$e=[];class et{constructor(e,t){this.type=e,this.inner=t}value(){let e=qe[this.type];return e(this.inner)}validate(e){let t=$e[this.type];return t(this.inner,e)}}qe.push(()=>Ye),$e.push((e,t)=>t===Ye);const tt=new et(0,null);qe.push(()=>Ze),$e.push((e,t)=>t===Ze);const nt=new et(1,null);qe.push(()=>at),$e.push((e,t)=>t===at);new et(2,null);let at=Qe;class st extends Je{static create(e=at){return new et(this.id,new st(e))}constructor(e=at){super(),this.revision=e}value(){return this.revision}dirty(){this.revision=++at}}d(st);class it extends Je{constructor(){super(...arguments),this.lastChecked=null,this.lastValue=null}value(){let e=this.lastChecked,t=this.lastValue;return e!==at&&(this.lastChecked=at,this.lastValue=t=this.compute()),this.lastValue}invalidate(){this.lastChecked=null}}class rt extends it{static create(e,t){return new et(this.id,new rt(e,t))}constructor(e,t){super(),this.first=e,this.second=t}compute(){return Fe(this.first.value(),this.second.value())}}d(rt);class ot extends it{static create(e){return new et(this.id,new ot(e))}constructor(e){super(),this.tags=e}compute(){let e=this.tags,t=-1;for(let n,a=0;a<e.length;a++)n=e[a].value(),t=Fe(n,t);return t}}d(ot);class dt extends it{static create(e){return new et(this.id,new dt(e))}constructor(e){super(),this.tag=e,this.lastUpdated=Qe}compute(){return Fe(this.lastUpdated,this.tag.value())}update(e){e!==this.tag&&(this.tag=e,this.lastUpdated=at,this.invalidate())}}d(dt);class lt{constructor(){this.lastRevision=null,this.lastValue=null}value(){let e=this.tag,t=this.lastRevision,n=this.lastValue;return null!==t&&e.validate(t)||(n=this.lastValue=this.compute(),this.lastRevision=e.value()),n}invalidate(){this.lastRevision=null}}class pt{constructor(e){this.lastValue=null,this.lastRevision=null,this.initialized=!1,this.tag=e.tag,this.reference=e}peek(){return this.initialized?this.lastValue:this.initialize()}revalidate(){if(!this.initialized)return this.initialize();let e=this.reference,t=this.lastRevision,n=e.tag;if(n.validate(t))return ct;this.lastRevision=n.value();let a=this.lastValue,s=e.value();return s===a?ct:(this.lastValue=s,s)}initialize(){let e=this.reference,t=this.lastValue=e.value();return this.lastRevision=e.tag.value(),this.initialized=!0,t}}const ct='adb3b78e-3d22-4e4b-877a-6317c2c5c145';class ut{constructor(e){this.inner=e,this.tag=tt}value(){return this.inner}}class mt extends We{constructor(e,t){super(e.valueReferenceFor(t)),this.retained=!1,this.seen=!1,this.key=t.key,this.iterable=e,this.memo=e.memoReferenceFor(t)}update(e){this.retained=!0,this.iterable.updateValueReference(this.value,e),this.iterable.updateMemoReference(this.memo,e)}shouldRemove(){return!this.retained}reset(){this.retained=!1,this.seen=!1}}class ft{constructor(e){this.iterator=null,this.map=o(),this.list=new Ue,this.tag=e.tag,this.iterable=e}isEmpty(){let e=this.iterator=this.iterable.iterate();return e.isEmpty()}iterate(){let e;return e=null===this.iterator?this.iterable.iterate():this.iterator,this.iterator=null,e}has(e){return!!this.map[e]}get(e){return this.map[e]}wasSeen(e){let t=this.map[e];return t!==void 0&&t.seen}append(e){let t=this.map,n=this.list,a=this.iterable,s=t[e.key]=new mt(a,e);return n.append(s),s}insertBefore(e,t){let n=this.map,a=this.list,s=this.iterable,i=n[e.key]=new mt(s,e);return i.retained=!0,a.insertBefore(i,t),i}move(e,t){let n=this.list;e.retained=!0,n.remove(e),n.insertBefore(e,t)}remove(e){let t=this.list;t.remove(e),delete this.map[e.key]}nextNode(e){return this.list.nextNode(e)}head(){return this.list.head()}}class gt{constructor(e){this.iterator=null;let t=new ft(e);this.artifacts=t}next(){let e=this.artifacts,t=this.iterator=this.iterator||e.iterate(),n=t.next();return null===n?null:e.append(n)}}var ht;(function(e){e[e.Append=0]='Append',e[e.Prune=1]='Prune',e[e.Done=2]='Done'})(ht||(ht={}));class yt{constructor({target:e,artifacts:t}){this.target=e,this.artifacts=t,this.iterator=t.iterate(),this.current=t.head()}sync(){for(let e=ht.Append;;)switch(e){case ht.Append:e=this.nextAppend();break;case ht.Prune:e=this.nextPrune();break;case ht.Done:return void this.nextDone();}}advanceToKey(e){let t=this.current,n=this.artifacts,a=t;for(;null!==a&&a.key!==e;)a.seen=!0,a=n.nextNode(a);null!==a&&(this.current=n.nextNode(a))}nextAppend(){let e=this.iterator,t=this.current,n=this.artifacts,a=e.next();if(null===a)return this.startPrune();let s=a.key;return null!==t&&t.key===s?this.nextRetain(a):n.has(s)?this.nextMove(a):this.nextInsert(a),ht.Append}nextRetain(e){let t=this.artifacts,n=this.current;n=n,n.update(e),this.current=t.nextNode(n),this.target.retain(e.key,n.value,n.memo)}nextMove(e){let t=this.current,n=this.artifacts,a=this.target,s=e.key,i=n.get(e.key);i.update(e),n.wasSeen(e.key)?(n.move(i,t),a.move(i.key,i.value,i.memo,t?t.key:null)):this.advanceToKey(s)}nextInsert(e){let t=this.artifacts,n=this.target,a=this.current,s=t.insertBefore(e,a);n.insert(s.key,s.value,s.memo,a?a.key:null)}startPrune(){return this.current=this.artifacts.head(),ht.Prune}nextPrune(){let e=this.artifacts,t=this.target,n=this.current;if(null===n)return ht.Done;let a=n;return this.current=e.nextNode(a),a.shouldRemove()?(e.remove(a),t.delete(a.key)):a.reset(),ht.Prune}nextDone(){this.target.done()}}class bt{constructor(e){this.tags=o(),this.computedPropertyTags=o(),this.trackedProperties=e?Object.create(e.trackedProperties):o(),this.trackedPropertyDependencies=e?Object.create(e.trackedPropertyDependencies):o()}tagFor(e){let t=this.tags[e];if(t)return t;let n;return(n=this.trackedPropertyDependencies[e])?this.tags[e]=v(this,e,n):this.tags[e]=st.create()}dirtyableTagFor(e){let t,n=this.trackedPropertyDependencies[e];return n?(t=this.computedPropertyTags[e],t?t:this.computedPropertyTags[e]=st.create()):(t=this.tags[e],t?t:this.tags[e]=st.create())}}let vt=Symbol('ember-object'),kt=Object.prototype.hasOwnProperty,St=function(){};class At extends Error{constructor(e,t,n){super(n),this.target=e,this.key=t}static for(e,t){return new At(e,t,`The property '${t}' on ${e} was changed after being rendered. If you want to change a property used in a template after the component has rendered, mark the property as a tracked property with the @tracked decorator.`)}}class Ct{constructor(e){this.debugName=null,this.__args__=null,Object.assign(this,e)}get element(){let e=this.bounds;return n(e&&e.firstNode===e.lastNode,`The 'element' property can only be accessed on components that contain a single root element in their template. Try using 'bounds' instead to access the first and last nodes.`),e.firstNode}get args(){return this.__args__}set args(e){this.__args__=e,k(this).dirtyableTagFor('args').inner.dirty()}static create(e){return new this(e)}didInsertElement(){}didUpdate(){}willDestroy(){}destroy(){this.willDestroy()}toString(){return`${this.debugName} component`}}const xt={dynamicLayout:!1,dynamicTag:!0,prepareArgs:!1,createArgs:!0,attributeHook:!0,elementHook:!0};class Et{constructor(e,t,n,a){this.name=e,this.manager=t,this.ComponentClass=n,this.layout=a,this.state={name:e,capabilities:xt,ComponentClass:n,layout:a}}toJSON(){return{GlimmerDebug:`<component-definition name="${this.name}">`}}}class Tt{constructor(e,t=null){this._registry=e,this._resolver=t,this._lookups={},this._factoryDefinitionLookups={}}factoryFor(e){let t=this._factoryDefinitionLookups[e];return t||(this._resolver&&(t=this._resolver.retrieve(e)),!t&&(t=this._registry.registration(e)),t&&(this._factoryDefinitionLookups[e]=t)),t?this.buildFactory(e,t):void 0}lookup(e){let t=!1!==this._registry.registeredOption(e,'singleton');if(t&&this._lookups[e])return this._lookups[e];let n=this.factoryFor(e);if(n){if(!1===this._registry.registeredOption(e,'instantiate'))return n.class;let a=n.create();return t&&a&&(this._lookups[e]=a),a}}defaultInjections(){return{}}buildInjections(e){let t,n=this.defaultInjections(e),a=this._registry.registeredInjections(e);for(let s=0;s<a.length;s++)t=a[s],n[t.property]=this.lookup(t.source);return n}buildFactory(e,t){let n=this.buildInjections(e);return{class:t,create(e){let a=Object.assign({},n,e);return t.create(a)}}}}class Ot{constructor(e){this._registrations={},this._registeredOptions={},this._registeredInjections={},e&&e.fallback&&(this._fallback=e.fallback)}register(e,t,n){this._registrations[e]=t,n&&(this._registeredOptions[e]=n)}registration(e){let t=this._registrations[e];return void 0===t&&this._fallback&&(t=this._fallback.registration(e)),t}unregister(e){delete this._registrations[e],delete this._registeredOptions[e],delete this._registeredInjections[e]}registerOption(e,t,n){let a=this._registeredOptions[e];a||(a={},this._registeredOptions[e]=a),a[t]=n}registeredOption(e,t){let n,a=this.registeredOptions(e);return a&&(n=a[t]),void 0===n&&void 0!==this._fallback&&(n=this._fallback.registeredOption(e,t)),n}registeredOptions(e){let t=this._registeredOptions[e];if(t===void 0){var n=e.split(':');let a=n[0];t=this._registeredOptions[a]}return t}unregisterOption(e,t){let n=this._registeredOptions[e];n&&delete n[t]}registerInjection(e,t,n){let a=this._registeredInjections[e];a===void 0&&(this._registeredInjections[e]=a=[]),a.push({property:t,source:n})}registeredInjections(e){var t=e.split(':');let n=t[0],a=this._fallback?this._fallback.registeredInjections(e):[];return Array.prototype.push.apply(a,this._registeredInjections[n]),Array.prototype.push.apply(a,this._registeredInjections[e]),a}}const Pt='__owner__';class Bt{constructor(e){this._bounds=e}get firstNode(){return this._bounds.firstNode()}get lastNode(){return this._bounds.lastNode()}}const Dt=new class{constructor(){this.evaluateOpcode=s(78).slice()}add(e,t){this.evaluateOpcode[e]=t}evaluate(e,t,n){let a=this.evaluateOpcode[n];a(e,t)}};class Nt{constructor(){i(this)}}class _t extends Nt{constructor(){super(...arguments),this.next=null,this.prev=null}}var It;(function(e){e[e.pc=0]='pc',e[e.ra=1]='ra',e[e.fp=2]='fp',e[e.sp=3]='sp',e[e.s0=4]='s0',e[e.s1=5]='s1',e[e.t0=6]='t0',e[e.t1=7]='t1',e[e.v0=8]='v0'})(It||(It={}));class Lt extends ut{constructor(e){super(e)}static create(e){return void 0===e?Rt:null===e?Ft:!0===e?jt:!1===e?wt:'number'==typeof e?new Ht(e):new Mt(e)}get(){return Rt}}class Mt extends Lt{constructor(){super(...arguments),this.lengthReference=null}get(e){if('length'===e){let e=this.lengthReference;return null===e&&(e=this.lengthReference=new Ht(this.inner.length)),e}return super.get(e)}}class Ht extends Lt{constructor(e){super(e)}}const Rt=new Ht(void 0),Ft=new Ht(null),jt=new Ht(!0),wt=new Ht(!1);class zt{constructor(e){this.inner=e,this.tag=e.tag}value(){return this.toBool(this.inner.value())}toBool(e){return!!e}}class Vt extends lt{constructor(e){super(),this.parts=e,this.tag=c(e)}compute(){let e=[];for(let t,n=0;n<this.parts.length;n++)t=this.parts[n].value(),null!==t&&void 0!==t&&(e[n]=O(t));return 0<e.length?e.join(''):null}}Dt.add(1,(e,{op1:t})=>{let n=e.stack,a=e.constants.resolveHandle(t),s=n.pop(),i=a(e,s);e.loadValue(It.v0,i)}),Dt.add(4,(e,{op1:t})=>{let n=e.referenceForSymbol(t);e.stack.push(n)}),Dt.add(2,(e,{op1:t})=>{let n=e.stack.pop();e.scope().bindSymbol(t,n)}),Dt.add(3,(e,{op1:t})=>{let n=e.stack.pop(),a=e.stack.pop(),s=e.stack.pop(),i=s?[n,a,s]:null;e.scope().bindBlock(t,i)}),Dt.add(76,(e,{op1:t})=>{let n=e.constants.getString(t),a=e.scope().getPartialMap(),s=a[n];s===void 0&&(s=e.getSelf().get(n)),e.stack.push(s)}),Dt.add(17,(e,{op1:t,op2:n})=>{e.pushRootScope(t,!!n)}),Dt.add(5,(e,{op1:t})=>{let n=e.constants.getString(t),a=e.stack.pop();e.stack.push(a.get(n))}),Dt.add(6,(e,{op1:t})=>{let n=e.stack,a=e.scope().getBlock(t);a?(n.push(a[2]),n.push(a[1]),n.push(a[0])):(n.push(null),n.push(null),n.push(null))}),Dt.add(7,(e,{op1:t})=>{let n=!!e.scope().getBlock(t);e.stack.push(n?jt:wt)}),Dt.add(8,(e)=>{let t=e.stack.pop();let n=t&&t.parameters.length;e.stack.push(n?jt:wt)}),Dt.add(9,(e,{op1:t})=>{let n=Array(t);for(let a,s=t;0<s;s--)a=s-1,n[a]=e.stack.pop();e.stack.push(new Vt(n))});var Wt;(function(e){e[e.Text=0]='Text',e[e.Append=1]='Append',e[e.Comment=2]='Comment',e[e.Modifier=3]='Modifier',e[e.Block=4]='Block',e[e.Component=5]='Component',e[e.OpenElement=6]='OpenElement',e[e.OpenSplattedElement=7]='OpenSplattedElement',e[e.FlushElement=8]='FlushElement',e[e.CloseElement=9]='CloseElement',e[e.StaticAttr=10]='StaticAttr',e[e.DynamicAttr=11]='DynamicAttr',e[e.AttrSplat=12]='AttrSplat',e[e.Yield=13]='Yield',e[e.Partial=14]='Partial',e[e.DynamicArg=15]='DynamicArg',e[e.StaticArg=16]='StaticArg',e[e.TrustingAttr=17]='TrustingAttr',e[e.Debugger=18]='Debugger',e[e.ClientSideStatement=19]='ClientSideStatement',e[e.Unknown=20]='Unknown',e[e.Get=21]='Get',e[e.MaybeLocal=22]='MaybeLocal',e[e.HasBlock=23]='HasBlock',e[e.HasBlockParams=24]='HasBlockParams',e[e.Undefined=25]='Undefined',e[e.Helper=26]='Helper',e[e.Concat=27]='Concat',e[e.ClientSideExpression=28]='ClientSideExpression'})(Wt||(Wt={}));var Ut;(function(e){e.isUnknown=P(Wt.Unknown),e.isGet=P(Wt.Get),e.isConcat=P(Wt.Concat),e.isHelper=P(Wt.Helper),e.isHasBlock=P(Wt.HasBlock),e.isHasBlockParams=P(Wt.HasBlockParams),e.isUndefined=P(Wt.Undefined),e.isClientSide=P(Wt.ClientSideExpression),e.isMaybeLocal=P(Wt.MaybeLocal),e.isPrimitiveValue=function(e){return!(null!==e)||'object'!=typeof e}})(Ut||(Ut={}));var Gt;(function(e){function t(e){return e[0]===Wt.StaticAttr||e[0]===Wt.DynamicAttr||e[0]===Wt.TrustingAttr}function n(e){return e[0]===Wt.StaticArg||e[0]===Wt.DynamicArg}e.isText=P(Wt.Text),e.isAppend=P(Wt.Append),e.isComment=P(Wt.Comment),e.isModifier=P(Wt.Modifier),e.isBlock=P(Wt.Block),e.isComponent=P(Wt.Component),e.isOpenElement=P(Wt.OpenElement),e.isSplatElement=P(Wt.OpenSplattedElement),e.isFlushElement=P(Wt.FlushElement),e.isCloseElement=P(Wt.CloseElement),e.isStaticAttr=P(Wt.StaticAttr),e.isDynamicAttr=P(Wt.DynamicAttr),e.isAttrSplat=P(Wt.AttrSplat),e.isYield=P(Wt.Yield),e.isPartial=P(Wt.Partial),e.isDynamicArg=P(Wt.DynamicArg),e.isStaticArg=P(Wt.StaticArg),e.isTrustingAttr=P(Wt.TrustingAttr),e.isDebugger=P(Wt.Debugger),e.isClientSide=P(Wt.ClientSideStatement),e.isAttribute=t,e.isArgument=n,e.isParameter=function(e){return t(e)||n(e)}})(Gt||(Gt={}));var Kt;(function(e){e[e.OpenComponentElement=0]='OpenComponentElement',e[e.DidCreateElement=1]='DidCreateElement',e[e.SetComponentAttrs=2]='SetComponentAttrs',e[e.DidRenderLayout=3]='DidRenderLayout',e[e.Debugger=4]='Debugger'})(Kt||(Kt={}));var Xt=Wt;const Yt='&attrs';class Qt{constructor(e=0){this.offset=e,this.names=o(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}compile(e,t){let n=e[this.offset],a=this.names[n],s=this.funcs[a];!1,s(e,t)}}const Zt=new Qt,Jt=new Qt(1);Zt.add(Xt.Text,(e,t)=>{t.text(e[1])}),Zt.add(Xt.Comment,(e,t)=>{t.comment(e[1])}),Zt.add(Xt.CloseElement,(e,t)=>{t.closeElement()}),Zt.add(Xt.FlushElement,(e,t)=>{t.flushElement()}),Zt.add(Xt.Modifier,(e,t)=>{let n=t.lookup,a=t.referrer,s=e[1],i=e[2],r=e[3],o=n.lookupModifier(s,a);if(o)t.modifier(o,i,r);else throw new Error(`Compile Error ${s} is not a modifier: Helpers may not be used in the element form.`)}),Zt.add(Xt.StaticAttr,(e,t)=>{let n=e[1],a=e[2],s=e[3];t.staticAttr(n,s,a)}),Zt.add(Xt.DynamicAttr,(e,t)=>{B(e,!1,t)}),Zt.add(Xt.TrustingAttr,(e,t)=>{B(e,!0,t)}),Zt.add(Xt.OpenElement,(e,t)=>{t.openPrimitiveElement(e[1])}),Zt.add(Xt.OpenSplattedElement,(e,t)=>{t.setComponentAttrs(!0),t.putComponentOperations(),t.openElementWithOperations(e[1])}),Jt.add(Kt.OpenComponentElement,(e,t)=>{t.putComponentOperations(),t.openElementWithOperations(e[2])}),Jt.add(Kt.DidCreateElement,(e,t)=>{t.didCreateElement(It.s0)}),Jt.add(Kt.SetComponentAttrs,(e,t)=>{t.setComponentAttrs(e[2])}),Jt.add(Kt.Debugger,()=>{debugger}),Jt.add(Kt.DidRenderLayout,(e,t)=>{t.didRenderLayout(It.s0)}),Zt.add(Xt.Append,(e,t)=>{let n=e[1],a=e[2],s=t.macros.inlines,i=s.compile(e,t)||n;if(!0!==i){let e=$t.isGet(n),s=$t.isMaybeLocal(n);a?t.guardedAppend(n,!0):e||s?t.guardedAppend(n,!1):(D(n,t),t.dynamicContent(!1))}}),Zt.add(Xt.Block,(e,t)=>{let n=e[1],a=e[2],s=e[3],i=e[4],r=e[5],o=t.template(i),d=t.template(r),l=t.macros.blocks;l.compile(n,a,s,o&&o,d&&d,t)}),Zt.add(Xt.Component,(e,t)=>{let n=e[1],a=e[2],s=e[3],i=e[4],r=t.lookup,o=t.referrer,d=r.lookupComponentSpec(n,o);if(null!==d){let e=r.getCapabilities(d),n=[[Xt.ClientSideStatement,Kt.SetComponentAttrs,!0],...a,[Xt.ClientSideStatement,Kt.SetComponentAttrs,!1]],o=t.inlineBlock({statements:n,parameters:Xe}),l=t.template(i);if(!1===e.dynamicLayout){let n=r.getLayout(d);t.pushComponentDefinition(d),t.invokeStaticComponent(e,n,o,null,s,!1,l&&l)}else t.pushComponentDefinition(d),t.invokeComponent(o,null,s,!1,l&&l)}else throw new Error(`Compile Error: Cannot find component ${n}`)}),Zt.add(Xt.Partial,(e,t)=>{let n=e[1],a=e[2],s=t.referrer;t.startLabels(),t.pushFrame(),t.returnTo('END'),D(n,t),t.dup(),t.enter(2),t.jumpUnless('ELSE'),t.invokePartial(s,t.evalSymbols(),a),t.popScope(),t.popFrame(),t.label('ELSE'),t.exit(),t.return(),t.label('END'),t.popFrame(),t.stopLabels()}),Zt.add(Xt.Yield,(e,t)=>{let n=e[1],a=e[2];t.yield(n,a)}),Zt.add(Xt.AttrSplat,(e,t)=>{let n=e[1];t.yield(n,[]),t.didCreateElement(It.s0),t.setComponentAttrs(!1)}),Zt.add(Xt.Debugger,(e,t)=>{let n=e[1];t.debugger(t.evalSymbols(),n)}),Zt.add(Xt.ClientSideStatement,(e,t)=>{Jt.compile(e,t)});const qt=new Qt;var $t=Ut;qt.add(Xt.Unknown,(e,t)=>{let n=t.lookup,a=t.asPartial,s=t.referrer,i=e[1],r=n.lookupHelper(i,s);null===r?a?t.resolveMaybeLocal(i):(t.getVariable(0),t.getProperty(i)):t.helper(r,null,null)}),qt.add(Xt.Concat,(e,t)=>{let n=e[1];for(let a=0;a<n.length;a++)D(n[a],t);t.concat(n.length)}),qt.add(Xt.Helper,(e,t)=>{let n=t.lookup,a=t.referrer,s=e[1],i=e[2],r=e[3];if('component'===s){let e=i[0],n=i.slice(1);return void t.curryComponent(e,n,r,!0)}let o=n.lookupHelper(s,a);if(null!==o)t.helper(o,i,r);else throw new Error(`Compile Error: ${s} is not a helper`)}),qt.add(Xt.Get,(e,t)=>{let n=e[1],a=e[2];t.getVariable(n);for(let n=0;n<a.length;n++)t.getProperty(a[n])}),qt.add(Xt.MaybeLocal,(e,t)=>{let n=e[1];if(t.asPartial){let e=n[0];n=n.slice(1),t.resolveMaybeLocal(e)}else t.getVariable(0);for(let a=0;a<n.length;a++)t.getProperty(n[a])}),qt.add(Xt.Undefined,(e,t)=>{return t.pushPrimitiveReference(void 0)}),qt.add(Xt.HasBlock,(e,t)=>{t.hasBlock(e[1])}),qt.add(Xt.HasBlockParams,(e,t)=>{t.hasBlockParams(e[1])});class E{constructor(){var e=N();let t=e.blocks,n=e.inlines;this.blocks=t,this.inlines=n}}class en{constructor(){this.names=o(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t,n,a,s,i){let r=this.names[e];if(r===void 0){let r=this.missing,o=r(e,t,n,a,s,i)}else{let e=this.funcs[r];e(t,n,a,s,i)}}}const tn=new en;class nn{constructor(){this.names=o(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t){let n=e[1];if(!Array.isArray(n))return['expr',n];let a,s,i;if(n[0]===Xt.Helper)a=n[1],s=n[2],i=n[3];else if(n[0]===Xt.Unknown)a=n[1],s=i=null;else return['expr',n];let r=this.names[a];if(r===void 0&&this.missing){let e=this.missing,r=e(a,s,i,t);return!1===r?['expr',n]:r}if(void 0!==r){let e=this.funcs[r],o=e(a,s,i,t);return!1===o?['expr',n]:o}return['expr',n]}}const an=new nn;N(tn,an);class sn{constructor(e,t,n,a){this.statements=e,this.containingLayout=t,this.options=n,this.symbolTable=a,this.compiled=null}static topLevel(e,t){return new sn(e.statements,{block:e,referrer:t.referrer},t,{referrer:t.referrer,hasEval:e.hasEval,symbols:e.symbols})}compile(){let e=this.compiled;if(null!==e)return e;let t=this.options,n=this.statements,a=this.containingLayout,s=a.referrer,i=t.program,r=t.lookup,o=t.macros,d=t.asPartial,l=t.Builder,p=new l(i,r,s,o,a,d);for(let e=0;e<n.length;e++)_(n[e],p);let c=p.commit(i.heap);return this.compiled=c}}class rn{constructor(e){this.builder=e}static(e,t){let n=t[0],a=t[1],s=t[2],i=t[3],r=this.builder,o=r.lookup;if(null!==e){let t=o.getCapabilities(e);if(!1===t.dynamicLayout){let d=o.getLayout(e);r.pushComponentDefinition(e),r.invokeStaticComponent(t,d,null,n,a,!1,s,i)}else r.pushComponentDefinition(e),r.invokeComponent(null,n,a,!1,s,i)}}}const on=8;class dn{constructor(e){this.buffer=e,this.typePos=0,this.size=0}encode(e,...t){if(e>255)throw new Error(`Opcode type over 8-bits. Got ${e}.`);this.buffer.push(e|t.length<<on),this.typePos=this.buffer.length-1,t.forEach((e)=>{if(e>65535)throw new Error(`Operand over 16-bits. Got ${e}.`);this.buffer.push(e)}),this.size=this.buffer.length}compact(e){return String.fromCharCode(...e)}patch(e,t){if(-1===this.buffer[e+1])this.buffer[e+1]=t;else throw new Error('Trying to patch operand in populated slot instead of a reserved slot.')}}class ln{constructor(){this.labels=o(),this.targets=[]}label(e,t){this.labels[e]=t}target(e,t,n){this.targets.push({at:e,Target:t,target:n})}patch(e){let t=this.targets,n=this.labels;for(let s=0;s<t.length;s++){var a=t[s];let i=a.at,r=a.target,o=n[r]-i;e.patch(i,o)}}}class pn{constructor(e,t,n,a,s,i){this.program=e,this.lookup=t,this.referrer=n,this.macros=a,this.containingLayout=s,this.asPartial=i,this.encoder=new dn([]),this.labelsStack=new Ve,this.isComponentAttrs=!1,this.component=new rn(this),this.constants=e.constants}get pos(){return this.encoder.typePos}get nextPos(){return this.encoder.size}upvars(e){return s(e)}reserve(e,t=1){let n=[];for(let a=0;a<t;a++)n[a]=-1;this.push(e,...n)}push(e,...t){let n=this.encoder;n.encode(e,...t)}commit(e){this.push(20);let t=this.encoder.buffer,n=e.malloc();for(let n=0;n<t.length;n++)e.push(t[n]);return e.finishMalloc(n,this.containingLayout.block.symbols.length),n}setComponentAttrs(e){this.isComponentAttrs=e}pushArgs(e,t){let n=this.constants.stringArray(e);this.push(61,n,t)}get labels(){return this.labelsStack.current}startLabels(){this.labelsStack.push(new ln)}stopLabels(){let e=this.labelsStack.pop();e.patch(this.encoder)}pushComponentDefinition(e){this.push(59,this.constants.handle(e))}pushDynamicComponentManager(e){this.push(60,this.constants.serializable(e))}prepareArgs(e){this.push(63,e)}createComponent(e,t,n){let a=(!0===t?1:0)|(!0===n?1:0)<<1;this.push(64,a,e)}registerComponentDestructor(e){this.push(65,e)}beginComponentTransaction(){this.push(71)}commitComponentTransaction(){this.push(72)}putComponentOperations(){this.push(66)}getComponentSelf(e){this.push(67,e)}getComponentTagName(e){this.push(68,e)}getComponentLayout(e){this.push(69,e)}invokeComponentLayout(){this.push(70)}didCreateElement(e){this.push(73,e)}didRenderLayout(e){this.push(74,e)}invokePartial(e,t,n){let a=this.constants.serializable(e),s=this.constants.stringArray(t),i=this.constants.array(n);this.push(75,a,s,i)}resolveMaybeLocal(e){this.push(76,this.string(e))}debugger(e,t){this.push(77,this.constants.stringArray(e),this.constants.array(t))}dynamicContent(e){this.push(24,e?1:0)}text(e){this.push(22,this.constants.string(e))}openPrimitiveElement(e){this.push(25,this.constants.string(e))}openElementWithOperations(e){this.push(26,this.constants.string(e))}openDynamicElement(){this.push(27)}flushElement(){this.push(31)}closeElement(){this.push(32)}staticAttr(e,t,n){let a=this.constants.string(e),s=t?this.constants.string(t):0;if(this.isComponentAttrs)this.pushPrimitiveReference(n),this.push(30,a,1,s);else{let e=this.constants.string(n);this.push(28,a,e,s)}}dynamicAttr(e,t,n){let a=this.constants.string(e),s=t?this.constants.string(t):0;this.isComponentAttrs?this.push(30,a,!0===n?1:0,s):this.push(29,a,!0===n?1:0,s)}comment(e){let t=this.constants.string(e);this.push(23,t)}modifier(e,t,n){this.pushFrame(),this.compileArgs(t,n,null,!0),this.push(33,this.constants.handle(e)),this.popFrame()}putIterator(){this.push(55)}enterList(e){this.reserve(53),this.labels.target(this.pos,53,e)}exitList(){this.push(54)}iterate(e){this.reserve(56),this.labels.target(this.pos,56,e)}setVariable(e){this.push(2,e)}setBlock(e){this.push(3,e)}getVariable(e){this.push(4,e)}getProperty(e){this.push(5,this.string(e))}getBlock(e){this.push(6,e)}hasBlock(e){this.push(7,e)}hasBlockParams(e){this.getBlock(e),this.resolveBlock(),this.push(8)}concat(e){this.push(9,e)}load(e){this.push(15,e)}fetch(e){this.push(16,e)}dup(e=It.sp,t=0){return this.push(13,e,t)}pop(e=1){return this.push(14,e)}pushRemoteElement(){this.push(34)}popRemoteElement(){this.push(35)}label(e){this.labels.label(e,this.nextPos)}pushRootScope(e,t){this.push(17,e,t?1:0)}pushChildScope(){this.push(18)}popScope(){this.push(19)}returnTo(e){this.reserve(21),this.labels.target(this.pos,21,e)}pushDynamicScope(){this.push(37)}popDynamicScope(){this.push(38)}primitive(e){let t,n=0;switch(typeof e){case'number':0==e%1?-1<e?t=e:(t=this.negative(e),n=4):(t=this.float(e),n=1);break;case'string':t=this.string(e),n=2;break;case'boolean':t=0|e,n=3;break;case'object':t=2,n=3;break;case'undefined':t=3,n=3;break;default:throw new Error('Invalid primitive passed to pushPrimitive');}this.push(11,t<<3|n)}float(e){return this.constants.float(e)}negative(e){return this.constants.negative(e)}pushPrimitiveReference(e){this.primitive(e),this.primitiveReference()}primitiveReference(){this.push(12)}helper(e,t,n){this.pushFrame(),this.compileArgs(t,n,null,!0),this.push(1,this.constants.handle(e)),this.popFrame(),this.fetch(It.v0)}bindDynamicScope(e){this.push(36,this.names(e))}enter(e){this.push(50,e)}exit(){this.push(51)}return(){this.push(20)}pushFrame(){this.push(48)}popFrame(){this.push(49)}invokeVirtual(){this.push(42)}invokeYield(){this.push(44)}toBoolean(){this.push(52)}jump(e){this.reserve(45),this.labels.target(this.pos,45,e)}jumpIf(e){this.reserve(46),this.labels.target(this.pos,46,e)}jumpUnless(e){this.reserve(47),this.labels.target(this.pos,47,e)}string(e){return this.constants.string(e)}names(e){let t=[];for(let a,n=0;n<e.length;n++)a=e[n],t[n]=this.constants.string(a);return this.constants.array(t)}symbols(e){return this.constants.array(e)}inlineBlock(e){let t=e.parameters,n=e.statements,a={parameters:t,referrer:this.containingLayout.referrer},s={program:this.program,macros:this.macros,Builder:this.constructor,lookup:this.lookup,asPartial:this.asPartial,referrer:this.referrer};return new sn(n,this.containingLayout,s,a)}evalSymbols(){let e=this.containingLayout.block;return e.hasEval?e.symbols:null}compileParams(e){if(!e)return 0;for(let t=0;t<e.length;t++)D(e[t],this);return e.length}compileArgs(e,t,n,a){n&&(this.pushYieldableBlock(n.main),this.pushYieldableBlock(n.else),this.pushYieldableBlock(n.attrs));let s=this.compileParams(e),i=s<<4;a&&(i|=8),n&&(i|=7);let r=Xe;if(t){r=t[0];let e=t[1];for(let t=0;t<e.length;t++)D(e[t],this)}this.pushArgs(r,i)}invokeStaticBlock(e,t=0){let n=e.symbolTable.parameters,a=n.length,s=Math.min(t,a);if(this.pushFrame(),s){this.pushChildScope();for(let e=0;e<s;e++)this.dup(It.fp,t-e),this.setVariable(n[e])}this.pushBlock(e),this.resolveBlock(),this.invokeVirtual(),s&&this.popScope(),this.popFrame()}guardedAppend(e,t){this.startLabels(),this.pushFrame(),this.returnTo('END'),D(e,this),this.dup(),this.isComponent(),this.enter(2),this.jumpUnless('ELSE'),this.pushDynamicComponentManager(this.referrer),this.invokeComponent(null,null,null,!1,null,null),this.exit(),this.return(),this.label('ELSE'),this.dynamicContent(t),this.exit(),this.return(),this.label('END'),this.popFrame(),this.stopLabels()}yield(e,t){this.compileArgs(t,null,null,!1),this.getBlock(e),this.resolveBlock(),this.invokeYield(),this.popScope(),this.popFrame()}invokeComponent(e,t,n,a,s,i=null,r){this.fetch(It.s0),this.dup(It.sp,1),this.load(It.s0),this.pushFrame();this.compileArgs(t,n,{main:s,else:i,attrs:e},a),this.prepareArgs(It.s0),this.beginComponentTransaction(),this.pushDynamicScope(),this.createComponent(It.s0,null!==s,null!==i),this.registerComponentDestructor(It.s0),this.getComponentSelf(It.s0),r?(this.pushSymbolTable(r.symbolTable),this.pushLayout(r),this.resolveLayout()):this.getComponentLayout(It.s0),this.invokeComponentLayout(),this.didRenderLayout(It.s0),this.popFrame(),this.popScope(),this.popDynamicScope(),this.commitComponentTransaction(),this.load(It.s0)}invokeStaticComponent(e,n,a,s,r,o,d,l=null){let i=n.symbolTable,p=i.hasEval||e.prepareArgs;if(p)return void this.invokeComponent(a,s,r,o,d,l,n);this.fetch(It.s0),this.dup(It.sp,1),this.load(It.s0);let c=i.symbols;e.createArgs&&(this.pushFrame(),this.compileArgs(null,r,null,o)),this.beginComponentTransaction(),this.pushDynamicScope(),this.createComponent(It.s0,null!==d,null!==l),e.createArgs&&this.popFrame(),this.registerComponentDestructor(It.s0);let u=[];this.getComponentSelf(It.s0),u.push({symbol:0,isBlock:!1});for(let p,m=0;m<c.length;m++)switch(p=c[m],p.charAt(0)){case'&':let e=null;if('&default'===p)e=d;else if('&inverse'===p)e=l;else if(p===Yt)e=a;else throw t();e?(this.pushYieldableBlock(e),u.push({symbol:m+1,isBlock:!0})):(this.pushYieldableBlock(null),u.push({symbol:m+1,isBlock:!0}));break;case'@':if(!r)break;let n=r[0],s=r[1],i=p;o&&(i=p.slice(1));let f=n.indexOf(i);-1!==f&&(D(s[f],this),u.push({symbol:m+1,isBlock:!1}));}this.pushRootScope(c.length+1,!!(d||l||a));for(let t=u.length-1;0<=t;t--){var m=u[t];let e=m.symbol,n=m.isBlock;n?this.setBlock(e):this.setVariable(e)}this.pushFrame(),this.invokeStatic(n),this.didRenderLayout(It.s0),this.popFrame(),this.popScope(),this.popDynamicScope(),this.commitComponentTransaction(),this.load(It.s0)}dynamicComponent(e,t,n,a,s,i=null){this.startLabels(),this.pushFrame(),this.returnTo('END'),D(e,this),this.dup(),this.enter(2),this.jumpUnless('ELSE'),this.pushDynamicComponentManager(this.referrer),this.invokeComponent(null,t,n,a,s,i),this.label('ELSE'),this.exit(),this.return(),this.label('END'),this.popFrame(),this.stopLabels()}isComponent(){this.push(57)}curryComponent(e,t,n,a){let s=this.referrer;this.pushFrame(),this.compileArgs(t,n,null,a),D(e,this),this.push(58,this.constants.serializable(s)),this.popFrame(),this.fetch(It.v0)}pushSymbolTable(e){if(e){let t=this.constants.table(e);this.push(41,t)}else this.primitive(null)}pushBlockScope(){this.push(40)}pushYieldableBlock(e){this.pushSymbolTable(e&&e.symbolTable),this.pushBlockScope(),this.pushBlock(e)}template(e){return e?this.inlineBlock(e):null}}class cn extends pn{pushBlock(e){e?this.pushOther(e):this.primitive(null)}resolveBlock(){this.push(39)}pushLayout(e){e?this.pushOther(e):this.primitive(null)}resolveLayout(){this.push(39)}invokeStatic(e){this.pushOther(e),this.push(39),this.push(42)}pushOther(e){this.push(10,this.other(e))}other(e){return this.constants.other(e)}}class un{constructor(){this.stack=null,this.positional=new mn,this.named=new gn,this.blocks=new yn}setup(e,t,n,a,s){this.stack=e;let i=this.named,r=t.length,o=e.sp-r+1;i.setup(e,o,r,t,s);let d=this.positional,l=o-a;d.setup(e,l,a);let p=this.blocks,c=n.length;p.setup(e,l-3*c,c,n)}get tag(){return c([this.positional,this.named])}get base(){return this.blocks.base}get length(){return this.positional.length+this.named.length+3*this.blocks.length}at(e){return this.positional.at(e)}realloc(e){if(0<e){let t=this.positional,n=this.named,a=this.stack,s=t.base+e,r=t.length+n.length;for(let e=r-1;0<=e;e--)a.set(a.get(e,t.base),e,s);t.base+=e,n.base+=e,a.sp+=e}}capture(){let e=0===this.positional.length?kn:this.positional.capture(),t=0===this.named.length?vn:this.named.capture();return{tag:this.tag,length:this.length,positional:e,named:t}}clear(){let e=this.stack,t=this.length;e.pop(t)}}class mn{constructor(){this.base=0,this.length=0,this.stack=null,this._tag=null,this._references=null}setup(e,t,n){this.stack=e,this.base=t,this.length=n,0===n?(this._tag=tt,this._references=Xe):(this._tag=null,this._references=null)}get tag(){let e=this._tag;return e||(e=this._tag=c(this.references)),e}at(e){let t=this.base,n=this.length,a=this.stack;return 0>e||e>=n?Rt:a.get(e,t)}capture(){return new fn(this.tag,this.references)}prepend(e){let t=e.length;if(0<t){let n=this.base,a=this.length,s=this.stack;this.base=n-=t,this.length=a+t;for(let a=0;a<t;a++)s.set(e.at(a),a,n);this._tag=null,this._references=null}}get references(){let e=this._references;if(!e){let t=this.stack,n=this.base,a=this.length;e=this._references=t.slice(n,n+a)}return e}}class fn{constructor(e,t,n=t.length){this.tag=e,this.references=t,this.length=n}static empty(){return new fn(tt,Xe,0)}at(e){return this.references[e]}value(){return this.references.map(this.valueOf)}get(e){let t=this.references,n=this.length;if('length'===e)return Lt.create(n);let a=parseInt(e,10);return 0>a||a>=n?Rt:t[a]}valueOf(e){return e.value()}}class gn{constructor(){this.base=0,this.length=0,this._tag=null,this._references=null,this._names=Xe,this._atNames=Xe}setup(e,t,n,a,s){this.stack=e,this.base=t,this.length=n,0===n?(this._tag=tt,this._references=Xe,this._names=Xe,this._atNames=Xe):(this._tag=null,this._references=null,s?(this._names=a,this._atNames=null):(this._names=null,this._atNames=a))}get tag(){return c(this.references)}get names(){let e=this._names;return e||(e=this._names=this._atNames.map(this.toSyntheticName)),e}get atNames(){let e=this._atNames;return e||(e=this._atNames=this._names.map(this.toAtName)),e}has(e){return-1!==this.names.indexOf(e)}get(e,t=!0){let n=this.base,a=this.stack,s=t?this.names:this.atNames,i=s.indexOf(e);return-1===i?Rt:a.get(i,n)}capture(){return new hn(this.tag,this.names,this.references)}merge(e){let t=e.length;if(0<t){let n=this.names,a=this.length,s=this.stack,r=e.names;for(let o=0;o<t;o++){let t=r[o],i=n.indexOf(t);-1===i&&(a=n.push(t),s.push(e.references[o]))}this.length=a,this._tag=null,this._references=null,this._names=n,this._atNames=null}}get references(){let e=this._references;if(!e){let t=this.base,n=this.length,a=this.stack;e=this._references=a.slice(t,t+n)}return e}toSyntheticName(e){return e.slice(1)}toAtName(e){return`@${e}`}}class hn{constructor(e,t,n){this.tag=e,this.names=t,this.references=n,this.length=t.length,this._map=null}get map(){let e=this._map;if(!e){let t=this.names,n=this.references;e=this._map=o();for(let a,s=0;s<t.length;s++)a=t[s],e[a]=n[s]}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names,n=this.references,a=t.indexOf(e);return-1===a?Rt:n[a]}value(){let e=this.names,t=this.references,n=o();for(let a,s=0;s<e.length;s++)a=e[s],n[a]=t[s].value();return n}}class yn{constructor(){this.internalValues=null,this.internalTag=null,this.names=Xe,this.length=0,this.base=0}setup(e,t,n,a){this.stack=e,this.names=a,this.base=t,this.length=n,0===n?(this.internalTag=tt,this.internalValues=Xe):(this.internalTag=null,this.internalValues=null)}get values(){let e=this.internalValues;if(!e){let t=this.base,n=this.length,a=this.stack;e=this.internalValues=a.slice(t,t+3*n)}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.base,n=this.stack,a=this.names,s=a.indexOf(e);if(-1===a.indexOf(e))return null;let i=n.get(3*s,t),r=n.get(3*s+1,t),o=n.get(3*s+2,t);return null===o?null:[o,r,i]}capture(){return new bn(this.names,this.values)}}class bn{constructor(e,t){this.names=e,this.values=t,this.length=e.length}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);return-1===t?null:[this.values[3*t+2],this.values[3*t+1],this.values[3*t]]}}const vn=new hn(tt,Xe,Xe),kn=new fn(tt,Xe),Sn={tag:tt,length:0,positional:kn,named:vn},An='CURRIED COMPONENT DEFINITION [id=6f00feb9-a0ef-4547-99ea-ac328f80acea]';class Cn{constructor(e,t){this.inner=e,this.args=t,this[An]=!0}unwrap(e){e.realloc(this.offset);for(let n=this;;){var t=n;let a=t.args,s=t.inner;if(a&&(e.positional.prepend(a.positional),e.named.merge(a.named)),!I(s))return s;n=s}}get offset(){let e=this.inner,t=this.args,n=t?t.positional.length:0;return I(e)?n+e.offset:n}}class xn extends zt{static create(e){return new xn(e)}toBool(e){return I(e)}}Dt.add(24,(e,{op1:t})=>{let n,a=e.stack.pop(),s=a.value();n=t?e.elements().appendTrustingDynamicContent(s):e.elements().appendCautiousDynamicContent(s),l(a)||e.updateWith(new En(a,n))});class En extends _t{constructor(e,t){super(),this.reference=e,this.content=t,this.tag=e.tag}evaluate(e){let t=this.content,n=this.reference;t.update(e.env,n.value())}}Dt.add(18,(e)=>e.pushChildScope()),Dt.add(19,(e)=>e.popScope()),Dt.add(37,(e)=>e.pushDynamicScope()),Dt.add(38,(e)=>e.popDynamicScope()),Dt.add(10,(e,{op1:t})=>{e.stack.push(e.constants.getOther(t))}),Dt.add(11,(e,{op1:t})=>{let n=e.stack,a=7&t,s=t>>3;0==a?n.push(s):1==a?n.push(e.constants.getFloat(s)):2==a?n.push(e.constants.getString(s)):3==a?0==s?n.push(!1):1==s?n.push(!0):2==s?n.push(null):3==s?n.push(void 0):void 0:4==a?n.push(e.constants.getNegative(s)):void 0}),Dt.add(12,(e)=>{let t=e.stack;t.push(Lt.create(t.pop()))}),Dt.add(13,(e,{op1:t,op2:n})=>{let a=e.fetchValue(t)-n;e.stack.dup(a)}),Dt.add(14,(e,{op1:t})=>{e.stack.pop(t)}),Dt.add(15,(e,{op1:t})=>{e.load(t)}),Dt.add(16,(e,{op1:t})=>{e.fetch(t)}),Dt.add(36,(e,{op1:t})=>{let n=e.constants.getArray(t);e.bindDynamicScope(n)}),Dt.add(48,(e)=>{e.pushFrame()}),Dt.add(49,(e)=>{e.popFrame()}),Dt.add(50,(e,{op1:t})=>{e.enter(t)}),Dt.add(51,(e)=>{e.exit()}),Dt.add(41,(e,{op1:t})=>{let n=e.stack;n.push(e.constants.getSymbolTable(t))}),Dt.add(40,(e)=>{let t=e.stack;t.push(e.scope())}),Dt.add(39,(e)=>{let t=e.stack,n=t.pop();t.push(n?n.compile():null)}),Dt.add(42,(e)=>{e.call(e.stack.pop())}),Dt.add(43,(e,{op1:t})=>{e.call(t)}),Dt.add(44,(e)=>{let t=e.stack,n=t.pop(),a=t.pop(),s=t.pop();let r=t.pop();if(null===s)return e.pushFrame(),void e.pushScope(a);let o=a;{let e=s.parameters,t=e.length;if(0<t){o=o.child();for(let n=0;n<t;n++)o.bindSymbol(e[n],r.at(n))}}e.pushFrame(),e.pushScope(o),e.call(n)}),Dt.add(45,(e,{op1:t})=>{e.goto(t)}),Dt.add(46,(e,{op1:t})=>{let n=e.stack.pop();if(l(n))n.value()&&e.goto(t);else{let a=new pt(n);a.peek()&&e.goto(t),e.updateWith(new Tn(a))}}),Dt.add(47,(e,{op1:t})=>{let n=e.stack.pop();if(l(n))n.value()||e.goto(t);else{let a=new pt(n);a.peek()||e.goto(t),e.updateWith(new Tn(a))}}),Dt.add(20,(e)=>{e.return()}),Dt.add(21,(e,{op1:t})=>{e.returnTo(t)}),Dt.add(52,(e)=>{let t=e.env,n=e.stack;n.push(t.toConditionalReference(n.pop()))});class Tn extends _t{constructor(e){super(),this.type='assert',this.tag=e.tag,this.cache=e}evaluate(e){let t=this.cache;g(t.revalidate())&&e.throw()}}class On extends _t{constructor(e,t){super(),this.target=t,this.type='jump-if-not-modified',this.tag=e,this.lastRevision=e.value()}evaluate(e){let t=this.tag,n=this.target,a=this.lastRevision;!e.alwaysRevalidate&&t.validate(a)&&e.goto(n)}didModify(){this.lastRevision=this.tag.value()}}class Pn extends _t{constructor(e){super(),this.target=e,this.type='did-modify',this.tag=tt}evaluate(){this.target.didModify()}}class Bn{constructor(e){this.tag=tt,this.type='label',this.label=null,this.prev=null,this.next=null,i(this),this.label=e}evaluate(){}inspect(){return`${this.label} [${this._guid}]`}}Dt.add(22,(e,{op1:t})=>{e.elements().appendText(e.constants.getString(t))}),Dt.add(26,(e,{op1:t})=>{let n=e.constants.getString(t);e.elements().openElement(n)}),Dt.add(23,(e,{op1:t})=>{e.elements().appendComment(e.constants.getString(t))}),Dt.add(25,(e,{op1:t})=>{e.elements().openElement(e.constants.getString(t))}),Dt.add(27,(e)=>{let t=e.stack.pop().value();e.elements().openElement(t)}),Dt.add(34,(e)=>{let t,n,a=e.stack.pop(),s=e.stack.pop(),i=e.stack.pop(),r=i.value();if(l(a))t=a.value();else{let n=new pt(a);t=n.peek(),e.updateWith(new Tn(n))}if(l(s))n=s.value();else{let t=new pt(s);n=t.peek(),e.updateWith(new Tn(t))}e.elements().pushRemoteElement(t,r,n)}),Dt.add(35,(e)=>{e.elements().popRemoteElement()}),Dt.add(31,(e)=>{let t=e.fetchValue(It.t0);t&&(t.flush(e),e.loadValue(It.t0,null)),e.elements().flushElement()}),Dt.add(32,(e)=>{e.elements().closeElement()}),Dt.add(33,(e,{op1:t})=>{let n=e.constants.resolveHandle(t),a=e.stack,s=a.pop();var i=e.elements();let r=i.constructing,o=i.updateOperations,d=e.dynamicScope(),l=n.create(r,s,d,o);e.env.scheduleInstallModifier(l,n);let c=n.getDestructor(l);c&&e.newDestroyable(c);let u=n.getTag(l);p(u)||e.updateWith(new Dn(u,n,l))});class Dn extends _t{constructor(e,t,n){super(),this.tag=e,this.manager=t,this.modifier=n,this.type='update-modifier',this.lastUpdated=e.value()}evaluate(e){let t=this.manager,n=this.modifier,a=this.tag,s=this.lastUpdated;a.validate(s)||(e.env.scheduleUpdateModifier(n,t),this.lastUpdated=a.value())}}Dt.add(28,(e,{op1:t,op2:n,op3:a})=>{let s=e.constants.getString(t),i=e.constants.getString(n),r=a?e.constants.getString(a):null;e.elements().setStaticAttribute(s,i,r)}),Dt.add(29,(e,{op1:t,op2:n,op3:a})=>{let s=e.constants.getString(t),i=e.stack.pop(),r=i.value(),o=a?e.constants.getString(a):null,d=e.elements().setDynamicAttribute(s,r,!!n,o);l(i)||e.updateWith(new Nn(i,d))});class Nn extends _t{constructor(e,t){super(),this.reference=e,this.attribute=t,this.type='patch-element',this.tag=e.tag,this.lastRevision=this.tag.value()}evaluate(e){let t=this.attribute,n=this.reference,a=this.tag;a.validate(this.lastRevision)||(this.lastRevision=a.value(),t.update(n.value(),e.env))}}class _n{constructor(e,t,n,a){this.inner=e,this.resolver=t,this.meta=n,this.args=a,this.tag=e.tag,this.lastValue=null,this.lastDefinition=null}value(){let e=this.inner,t=this.lastValue,n=e.value();if(n===t)return this.lastDefinition;let a=null;if(I(n))a=n;else if('string'==typeof n&&n){let e=this.resolver,t=this.meta;a=L(e,n,t)}return a=this.curry(a),this.lastValue=n,this.lastDefinition=a,a}get(){return Rt}curry(e){let t=this.args;return!t&&I(e)?e:e?new Cn(e,t):null}}class In{constructor(e){this.list=e,this.tag=c(e),this.list=e}value(){let e=[],t=this.list;for(let n,a=0;a<t.length;a++)n=R(t[a].value()),n&&e.push(n);return 0===e.length?null:e.join(' ')}}const Ln=new un;Dt.add(57,(e)=>{let t=e.stack,n=t.pop();t.push(xn.create(n))}),Dt.add(58,(e,{op1:t})=>{let n=e.stack,a=n.pop(),s=n.pop(),i=null;s.length&&(i=s.capture());let r=e.constants.getSerializable(t),o=e.constants.resolver;e.loadValue(It.v0,new _n(a,o,r,i))}),Dt.add(59,(e,{op1:t})=>{let n=e.constants.resolveHandle(t);let a=n.manager;e.stack.push({definition:n,manager:a,state:null})}),Dt.add(60,(e,{op1:n})=>{let a,s=e.stack,i=s.pop().value();if('string'==typeof i){let t=e.constants,s=e.constants.resolver,r=t.getSerializable(n),o=L(s,i,r);a=o}else if(I(i))a=i;else throw t();s.push({definition:a,manager:null,state:null})}),Dt.add(61,(e,{op1:t,op2:n})=>{let a=e.stack,s=e.constants.getStringArray(t),i=[];4&n&&i.push('main'),2&n&&i.push('else'),1&n&&i.push('attrs'),Ln.setup(a,s,i,n>>4,!!(8&n)),a.push(Ln)}),Dt.add(63,(e,{op1:t})=>{let n,a=e.stack,s=e.fetchValue(t),i=s.definition;I(i)?(!1,n=a.pop(),i=s.definition=i.unwrap(n)):n=a.pop();var r=i;let o=r.manager,d=r.state;if(s.manager=i.manager,!0!==o.getCapabilities(d).prepareArgs)return void a.push(n);let l=n.blocks.values,p=n.blocks.names,c=o.prepareArgs(d,n);if(c){n.clear();for(let e=0;e<l.length;e++)a.push(l[e]);let e=c.positional,t=c.named,s=e.length;for(let t=0;t<s;t++)a.push(e[t]);let r=Object.keys(t);for(let e=0;e<r.length;e++)a.push(t[r[e]]);n.setup(a,r,p,s,!0)}a.push(n)}),Dt.add(64,(e,{op1:t,op2:n})=>{let a=e.dynamicScope(),s=e.fetchValue(n),i=s.definition,r=s.manager,o=null;r.getCapabilities(i.state).createArgs&&(o=e.stack.peek());let d=r.create(e.env,i.state,o,a,e.getSelf(),!!(1&t));s.state=d;let l=r.getTag(d);p(l)||e.updateWith(new Hn(l,d,r,a))}),Dt.add(65,(e,{op1:t})=>{var n=e.fetchValue(t);let a=n.manager,s=n.state,i=a.getDestructor(s);i&&e.newDestroyable(i)}),Dt.add(71,(e)=>{e.beginCacheGroup(),e.elements().pushSimpleBlock()}),Dt.add(66,(e)=>{e.loadValue(It.t0,new Mn)}),Dt.add(30,(e,{op1:t,op2:n,op3:a})=>{let s=e.constants.getString(t),i=e.stack.pop(),r=a?e.constants.getString(a):null;e.fetchValue(It.t0).setAttribute(s,i,!!n,r)});class Mn{constructor(){this.attributes=o(),this.classes=[]}setAttribute(e,t,n,a){'class'===e&&this.classes.push(t),this.attributes[e]={value:t,namespace:a,trusting:n}}flush(e){for(let t in this.attributes){let n=this.attributes[t],a=n.value,s=n.namespace,i=n.trusting;'class'==t&&(a=new In(this.classes));let r=e.elements().setDynamicAttribute(t,a.value(),i,s);l(a)||e.updateWith(new Nn(a,r))}}}Dt.add(73,(e,{op1:t})=>{var n=e.fetchValue(t);let a=n.definition,s=n.state,i=a.manager,r=e.fetchValue(It.t0);i.didCreateElement(s,e.elements().expectConstructing('DidCreateElementOpcode#evaluate'),r)}),Dt.add(67,(e,{op1:t})=>{var n=e.fetchValue(t);let a=n.definition,s=n.state,i=a.manager;e.stack.push(i.getSelf(s))}),Dt.add(68,(e,{op1:t})=>{var n=e.fetchValue(t);let a=n.definition,s=n.state,i=a.manager;e.stack.push(i.getTagName(s))}),Dt.add(69,(e,{op1:n})=>{let a,s=e.fetchValue(n),i=s.manager,r=s.definition,o=e.constants.resolver,d=e.stack,l=s.state,p=r.state;if(M(p,i))a=i.getLayout(p,o);else if(H(p,i))a=i.getDynamicLayout(l,o);else throw t();d.push(a.symbolTable),d.push(a.handle)}),Dt.add(70,(e)=>{let t=e.stack,n=t.pop();var a=t.pop();let s=a.symbols,r=a.hasEval;{let a=e.pushRootScope(s.length+1,!0);a.bindSelf(t.pop());let d=e.stack.pop(),l=null,i=-1;r&&(i=s.indexOf('$eval')+1,l=o());let p=d.named.atNames;for(let e=p.length-1;0<=e;e--){let t=p[e],n=s.indexOf(p[e]),i=d.named.get(t,!1);-1!==n&&a.bindSymbol(n+1,i),r&&(l[t]=i)}let c=(e,t)=>{let n=s.indexOf(e),i=u.get(t);-1!==n&&a.bindBlock(n+1,i),l&&(l[e]=i)},u=d.blocks;c(Yt,'attrs'),c('&inverse','else'),c('&default','main'),l&&a.bindEvalScope(l),e.call(n)}}),Dt.add(74,(e,{op1:t})=>{var n=e.fetchValue(t);let a=n.manager,s=n.state,i=e.elements().popBlock();a.didRenderLayout(s,i),e.env.didCreate(s,a),e.updateWith(new Rn(a,s,i))}),Dt.add(72,(e)=>{e.commitCacheGroup()});class Hn extends _t{constructor(e,t,n,a){super(),this.tag=e,this.component=t,this.manager=n,this.dynamicScope=a,this.type='update-component'}evaluate(){let e=this.component,t=this.manager,n=this.dynamicScope;t.update(e,n)}}class Rn extends _t{constructor(e,t,n){super(),this.manager=e,this.component=t,this.bounds=n,this.type='did-update-layout',this.tag=tt}evaluate(e){let t=this.manager,n=this.component,a=this.bounds;t.didUpdateLayout(n,a),e.env.didUpdate(n,t)}}let Fn=function(e,t){console.info('Use `context`, and `get(<path>)` to debug this template.'),e===t('this');debugger};class jn{constructor(e,t,n){this.scope=e,this.locals=o();for(let a=0;a<n.length;a++){let s=n[a],i=t[s-1],r=e.getSymbol(s);this.locals[i]=r}}get(e){let t=this.scope,n=this.locals,a=e.split('.');var s=e.split('.');let i,r=s[0],o=s.slice(1),d=t.getEvalScope();return'this'===r?i=t.getSelf():n[r]?i=n[r]:0===r.indexOf('@')&&d[r]?i=d[r]:(i=this.scope.getSelf(),o=a),o.reduce((e,t)=>e.get(t),i)}}Dt.add(77,(e,{op1:t,op2:n})=>{let a=e.constants.getStringArray(t),s=e.constants.getArray(n),i=new jn(e.scope(),a,s);Fn(e.getSelf().value(),(e)=>i.get(e).value())}),Dt.add(75,(e,{op1:t,op2:n,op3:a})=>{let s=e.constants,i=e.constants.resolver,r=e.stack,d=r.pop().value();let l=s.getSerializable(t),p=s.getStringArray(n),c=s.getArray(a),u=i.lookupPartial(d,l);let m=i.resolve(u);var f=m.getPartial();let g=f.symbolTable,h=f.handle;{let t=g.symbols,n=e.scope(),a=e.pushRootScope(t.length,!1);a.bindCallerScope(n.getCallerScope()),a.bindEvalScope(n.getEvalScope()),a.bindSelf(n.getSelf());let s=o();for(let e=0;e<c.length;e++){let t=c[e],a=p[t-1],i=n.getSymbol(t);s[a]=i}let r=n.getEvalScope();for(let e=0;e<t.length;e++){let n=t[e],s=e+1,i=r[n];i!==void 0&&a.bind(s,i)}a.bindPartialMap(s),e.pushFrame(),e.call(h)}});class wn{constructor(e){this.tag=e.tag,this.artifacts=e}value(){return!this.artifacts.isEmpty()}}Dt.add(55,(e)=>{let t=e.stack,n=t.pop(),a=t.pop(),s=e.env.iterableFor(n,a.value()),i=new gt(s);t.push(i),t.push(new wn(i.artifacts))}),Dt.add(53,(e,{op1:t})=>{e.enterList(t)}),Dt.add(54,(e)=>{e.exitList()}),Dt.add(56,(e,{op1:t})=>{let n=e.stack,a=n.peek().next();if(a){let t=e.iterate(a.memo,a.value);e.enterItem(a.key,t)}else e.goto(t)});class zn{constructor(e,t){this.element=e,this.nextSibling=t}}class Vn{constructor(e,t,n){this.parentNode=e,this.first=t,this.last=n}parentElement(){return this.parentNode}firstNode(){return this.first}lastNode(){return this.last}}class Wn{constructor(e,t){this.parentNode=e,this.node=t}parentElement(){return this.parentNode}firstNode(){return this.node}lastNode(){return this.node}}const Un='http://www.w3.org/2000/svg',Gn='http://www.w3.org/2000/svg',Kn={foreignObject:1,desc:1,title:1},Xn=Object.create(null);['b','big','blockquote','body','br','center','code','dd','div','dl','dt','em','embed','h1','h2','h3','h4','h5','h6','head','hr','i','img','li','listing','main','meta','nobr','ol','p','pre','ruby','s','small','span','strong','strike','sub','sup','table','tt','u','ul','var'].forEach((e)=>Xn[e]=1);let Yn='undefined'==typeof document?null:document;class Qn{constructor(e){this.document=e,this.setupUselessElement()}setupUselessElement(){this.uselessElement=this.document.createElement('div')}createElement(e,t){let n,a;if(t?(n=t.namespaceURI===Gn||'svg'===e,a=Kn[t.tagName]):(n='svg'===e,a=!1),n&&!a){if(Xn[e])throw new Error(`Cannot create a ${e} inside an SVG context`);return this.document.createElementNS(Gn,e)}return this.document.createElement(e)}insertBefore(e,t,n){e.insertBefore(t,n)}insertHTMLBefore(e,t,n){return ee(this.uselessElement,e,t,n)}createTextNode(e){return this.document.createTextNode(e)}createComment(e){return this.document.createComment(e)}}var Zn;(function(e){class t extends Qn{createElementNS(e,t){return this.document.createElementNS(e,t)}setAttribute(e,t,n,a=null){a?e.setAttributeNS(a,t,n):e.setAttribute(t,n)}}e.TreeConstruction=t;let n=t;n=J(Yn,n),n=Y(Yn,n,Gn),e.DOMTreeConstruction=n})(Zn||(Zn={}));let Jn=class extends Qn{constructor(e){super(e),this.document=e,this.namespace=null}setAttribute(e,t,n){e.setAttribute(t,n)}removeAttribute(e,t){e.removeAttribute(t)}insertAfter(e,t,n){this.insertBefore(e,t,n.nextSibling)}};Jn=J(Yn,Jn),Jn=Y(Yn,Jn,Gn);var qn=Jn;const $n=Zn.DOMTreeConstruction,ea=['javascript:','vbscript:'],ta=['A','BODY','LINK','IMG','IFRAME','BASE','FORM'],na=['EMBED'],aa=['href','src','background','action'],sa=['src'],ia={INPUT:{form:!0,autocorrect:!0,list:!0},SELECT:{form:!0},OPTION:{form:!0},TEXTAREA:{form:!0},LABEL:{form:!0},FIELDSET:{form:!0},LEGEND:{form:!0},OBJECT:{form:!0}};class ra{constructor(e){this.attribute=e}}class oa extends ra{set(e,t){let n=me(t);if(null!==n){var a=this.attribute;let t=a.name,s=a.namespace;e.__setAttribute(t,n,s)}}update(e){let t=me(e);var n=this.attribute;let a=n.element,s=n.name;null===t?a.removeAttribute(s):a.setAttribute(s,t)}}class da extends ra{set(e,t){if(null!==t&&t!==void 0){let n=this.attribute.name;this.value=t,e.__setProperty(n,t)}}update(e){var t=this.attribute;let n=t.element,a=t.name;this.value!==e&&(n[a]=this.value=e,(null===e||e===void 0)&&this.removeAttribute())}removeAttribute(){var e=this.attribute;let t=e.element,n=e.name,a=e.namespace;a?t.removeAttributeNS(a,n):t.removeAttribute(n)}}class la extends da{set(e,t,n){var a=this.attribute;let s=a.element,i=a.name,r=ie(n,s,i,t);super.set(e,r,n)}update(e,t){var n=this.attribute;let a=n.element,s=n.name,i=ie(t,a,s,e);super.update(i,t)}}class pa extends oa{set(e,t,n){var a=this.attribute;let s=a.element,i=a.name,r=ie(n,s,i,t);super.set(e,r,n)}update(e,t){var n=this.attribute;let a=n.element,s=n.name,i=ie(t,a,s,e);super.update(i,t)}}class ca extends da{set(e,t){e.__setProperty('value',R(t))}update(e){let t=this.attribute.element,n=t.value,a=R(e);n!==a&&(t.value=a)}}class ua extends da{set(e,t){null!==t&&t!==void 0&&!1!==t&&e.__setProperty('selected',!0)}update(e){let t=this.attribute.element;t.selected=!!e}}class ma{constructor(e,t,n,a){this.slots=e,this.callerScope=t,this.evalScope=n,this.partialMap=a}static root(e,t=0){let n=Array(t+1);for(let a=0;a<=t;a++)n[a]=Rt;return new ma(n,null,null,null).init({self:e})}static sized(e=0){let t=Array(e+1);for(let n=0;n<=e;n++)t[n]=Rt;return new ma(t,null,null,null)}init({self:e}){return this.slots[0]=e,this}getSelf(){return this.get(0)}getSymbol(e){return this.get(e)}getBlock(e){return this.get(e)}getEvalScope(){return this.evalScope}getPartialMap(){return this.partialMap}bind(e,t){this.set(e,t)}bindSelf(e){this.set(0,e)}bindSymbol(e,t){this.set(e,t)}bindBlock(e,t){this.set(e,t)}bindEvalScope(e){this.evalScope=e}bindPartialMap(e){this.partialMap=e}bindCallerScope(e){this.callerScope=e}getCallerScope(){return this.callerScope}child(){return new ma(this.slots.slice(),this.callerScope,this.evalScope,this.partialMap)}get(e){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);return this.slots[e]}set(e,t){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);this.slots[e]=t}}class fa{constructor(){this.scheduledInstallManagers=[],this.scheduledInstallModifiers=[],this.scheduledUpdateModifierManagers=[],this.scheduledUpdateModifiers=[],this.createdComponents=[],this.createdManagers=[],this.updatedComponents=[],this.updatedManagers=[],this.destructors=[]}didCreate(e,t){this.createdComponents.push(e),this.createdManagers.push(t)}didUpdate(e,t){this.updatedComponents.push(e),this.updatedManagers.push(t)}scheduleInstallModifier(e,t){this.scheduledInstallManagers.push(t),this.scheduledInstallModifiers.push(e)}scheduleUpdateModifier(e,t){this.scheduledUpdateModifierManagers.push(t),this.scheduledUpdateModifiers.push(e)}didDestroy(e){this.destructors.push(e)}commit(){let e=this.createdComponents,t=this.createdManagers;for(let n=0;n<e.length;n++){let a=e[n],s=t[n];s.didCreate(a)}let n=this.updatedComponents,a=this.updatedManagers;for(let e=0;e<n.length;e++){let t=n[e],s=a[e];s.didUpdate(t)}let s=this.destructors;for(let e=0;e<s.length;e++)s[e].destroy();let r=this.scheduledInstallManagers,o=this.scheduledInstallModifiers;for(let e=0;e<r.length;e++){let t=r[e],n=o[e];t.install(n)}let d=this.scheduledUpdateModifierManagers,l=this.scheduledUpdateModifiers;for(let e=0;e<d.length;e++){let t=d[e],n=l[e];t.update(n)}}}class ga{constructor({appendOperations:e,updateOperations:t}){this._transaction=null,this.appendOperations=e,this.updateOperations=t}toConditionalReference(e){return new zt(e)}getAppendOperations(){return this.appendOperations}getDOM(){return this.updateOperations}getIdentity(e){return r(e)+''}begin(){!1,this._transaction=new fa}get transaction(){return this._transaction}didCreate(e,t){this.transaction.didCreate(e,t)}didUpdate(e,t){this.transaction.didUpdate(e,t)}scheduleInstallModifier(e,t){this.transaction.scheduleInstallModifier(e,t)}scheduleUpdateModifier(e,t){this.transaction.scheduleUpdateModifier(e,t)}didDestroy(e){this.transaction.didDestroy(e)}commit(){let e=this.transaction;this._transaction=null,e.commit()}attributeFor(e,t,n=null){return de(e,t)}}class ha{constructor(e){this.trusting=e}retry(e,t){let n=this.bounds,a=n.parentElement(),s=X(n),i=xa.forInitialRender(e,{element:a,nextSibling:s});return this.trusting?i.__appendTrustingDynamicContent(t):i.__appendCautiousDynamicContent(t)}}class ya{constructor(e){this.inner=e,this.bounds=e.bounds}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}update(e,t){let n=this.inner=this.inner.update(e,t);return this.bounds=n.bounds,this}}class ba extends ha{constructor(e,t,n){super(n),this.bounds=e,this.lastValue=t}update(e,t){let n=this.lastValue;if(t===n)return this;if(z(t)||w(t))return this.retry(e,t);let a;if(a=j(t)?'':W(t)?t:t+'',a!==n){let e=this.bounds.firstNode();e.nodeValue=this.lastValue=a}return this}}class va extends ha{constructor(e,t,n){super(n),this.bounds=e,this.lastValue=t}update(e,t){let n=this.lastValue;return t===n?this:this.retry(e,t)}}class ka extends ha{constructor(e,t,n){super(n),this.bounds=e,this.lastValue=t}update(e,t){let n=this.lastValue;return t===n?this:w(t)&&t.toHTML()===n.toHTML()?(this.lastValue=t,this):this.retry(e,t)}}class Sa extends ha{constructor(e,t,n){super(n),this.bounds=e,this.lastValue=t}update(e,t){let n=this.lastValue;if(t===n)return this;let a=F(t);return a===n?this:this.retry(e,t)}}class Aa{constructor(e){this.node=e}firstNode(){return this.node}}class Ca{constructor(e){this.node=e}lastNode(){return this.node}}class xa{constructor(e,t,n){this.constructing=null,this.operations=null,this.cursorStack=new Ve,this.blockStack=new Ve,this.pushElement(t,n),this.env=e,this.dom=e.getAppendOperations(),this.updateOperations=e.getDOM()}static forInitialRender(e,t){let n=new this(e,t.element,t.nextSibling);return n.pushSimpleBlock(),n}static resume(e,t,n){let a=t.parentElement(),s=new this(e,a,n);return s.pushSimpleBlock(),s.pushBlockTracker(t),s}get element(){return this.cursorStack.current.element}get nextSibling(){return this.cursorStack.current.nextSibling}expectConstructing(){return this.constructing}block(){return this.blockStack.current}popElement(){this.cursorStack.pop(),this.cursorStack.current}pushSimpleBlock(){return this.pushBlockTracker(new Ea(this.element))}pushUpdatableBlock(){return this.pushBlockTracker(new Oa(this.element))}pushBlockList(e){return this.pushBlockTracker(new Pa(this.element,e))}pushBlockTracker(e,t=!1){let n=this.blockStack.current;return null!==n&&(n.newDestroyable(e),!t&&n.didAppendBounds(e)),this.__openBlock(),this.blockStack.push(e),e}popBlock(){return this.block().finalize(this),this.__closeBlock(),this.blockStack.pop()}__openBlock(){}__closeBlock(){}openElement(e){let t=this.__openElement(e);return this.constructing=t,t}__openElement(e){return this.dom.createElement(e,this.element)}flushElement(){let e=this.element,t=this.constructing;this.__flushElement(e,t),this.constructing=null,this.operations=null,this.pushElement(t,null),this.didOpenElement(t)}__flushElement(e,t){this.dom.insertBefore(e,t,this.nextSibling)}closeElement(){this.willCloseElement(),this.popElement()}pushRemoteElement(e,t,n=null){this.__pushRemoteElement(e,t,n)}__pushRemoteElement(e,t,n){this.pushElement(e,n);let a=new Ta(e);this.pushBlockTracker(a,!0)}popRemoteElement(){this.popBlock(),this.popElement()}pushElement(e,t){this.cursorStack.push(new zn(e,t))}didAddDestroyable(e){this.block().newDestroyable(e)}didAppendBounds(e){return this.block().didAppendBounds(e),e}didAppendNode(e){return this.block().didAppendNode(e),e}didOpenElement(e){return this.block().openElement(e),e}willCloseElement(){this.block().closeElement()}appendText(e){return this.didAppendNode(this.__appendText(e))}__appendText(e){let t=this.dom,n=this.element,a=this.nextSibling,s=t.createTextNode(e);return t.insertBefore(n,s,a),s}__appendNode(e){return this.dom.insertBefore(this.element,e,this.nextSibling),e}__appendFragment(e){let t=e.firstChild;if(t){let n=U(this.element,t,e.lastChild);return this.dom.insertBefore(this.element,e,this.nextSibling),n}return G(this.element,this.__appendComment(''))}__appendHTML(e){return this.dom.insertHTMLBefore(this.element,this.nextSibling,e)}appendTrustingDynamicContent(e){let t=new ya(this.__appendTrustingDynamicContent(e));return this.didAppendBounds(t),t}__appendTrustingDynamicContent(e){if(W(e))return this.trustedContent(e);if(j(e))return this.trustedContent('');if(w(e))return this.trustedContent(e.toHTML());if(V(e)){let t=this.__appendFragment(e);return new va(t,e,!0)}if(z(e)){let t=this.__appendNode(e);return new va(G(this.element,t),t,!0)}return this.trustedContent(e+'')}appendCautiousDynamicContent(e){let t=new ya(this.__appendCautiousDynamicContent(e));return this.didAppendBounds(t.bounds),t}__appendCautiousDynamicContent(e){if(W(e))return this.untrustedContent(e);if(j(e))return this.untrustedContent('');if(V(e)){let t=this.__appendFragment(e);return new va(t,e,!1)}if(z(e)){let t=this.__appendNode(e);return new va(G(this.element,t),t,!1)}if(w(e)){let t=e.toHTML(),n=this.__appendHTML(t);return new ka(n,e,!1)}return this.untrustedContent(e+'')}trustedContent(e){let t=this.__appendHTML(e);return new Sa(t,e,!0)}untrustedContent(e){let t=this.__appendText(e),n=G(this.element,t);return new ba(n,e,!1)}appendComment(e){return this.didAppendNode(this.__appendComment(e))}__appendComment(e){let t=this.dom,n=this.element,a=this.nextSibling,s=t.createComment(e);return t.insertBefore(n,s,a),s}__setAttribute(e,t,n){this.dom.setAttribute(this.constructing,e,t,n)}__setProperty(e,t){this.constructing[e]=t}setStaticAttribute(e,t,n){this.__setAttribute(e,t,n)}setDynamicAttribute(e,t,n,a){let s=this.constructing,i=this.env.attributeFor(s,e,n,a),r=new i({element:s,name:e,namespace:a||null});return r.set(this,t,this.env),r}}class Ea{constructor(e){this.parent=e,this.first=null,this.last=null,this.destroyables=null,this.nesting=0}destroy(){let e=this.destroyables;if(e&&e.length)for(let t=0;t<e.length;t++)e[t].destroy()}parentElement(){return this.parent}firstNode(){return this.first&&this.first.firstNode()}lastNode(){return this.last&&this.last.lastNode()}openElement(e){this.didAppendNode(e),this.nesting++}closeElement(){this.nesting--}didAppendNode(e){0!==this.nesting||(!this.first&&(this.first=new Aa(e)),this.last=new Ca(e))}didAppendBounds(e){0!==this.nesting||(!this.first&&(this.first=e),this.last=e)}newDestroyable(e){this.destroyables=this.destroyables||[],this.destroyables.push(e)}finalize(e){this.first||e.appendComment('')}}class Ta extends Ea{destroy(){super.destroy(),X(this)}}class Oa extends Ea{reset(e){let t=this.destroyables;if(t&&t.length)for(let n=0;n<t.length;n++)e.didDestroy(t[n]);let n=X(this);return this.first=null,this.last=null,this.destroyables=null,this.nesting=0,n}}class Pa{constructor(e,t){this.parent=e,this.boundList=t,this.parent=e,this.boundList=t}destroy(){this.boundList.forEachNode((e)=>e.destroy())}parentElement(){return this.parent}firstNode(){let e=this.boundList.head();return e&&e.firstNode()}lastNode(){let e=this.boundList.tail();return e&&e.lastNode()}openElement(){}closeElement(){}didAppendNode(){}didAppendBounds(){}newDestroyable(){}finalize(){}}class Ba{constructor(e,t,{alwaysRevalidate:n=!1}){this.frameStack=new Ve,this.env=e,this.constants=t.constants,this.dom=e.getDOM(),this.alwaysRevalidate=n}execute(e,t){let n=this.frameStack;for(this.try(e,t);!0&&!n.isEmpty();){let e=this.frame.nextStatement();if(null===e){this.frameStack.pop();continue}e.evaluate(this)}}get frame(){return this.frameStack.current}goto(e){this.frame.goto(e)}try(e,t){this.frameStack.push(new La(this,e,t))}throw(){this.frame.handleException(),this.frameStack.pop()}}class Da extends _t{constructor(e,t,n,a){super(),this.start=e,this.state=t,this.type='block',this.next=null,this.prev=null,this.children=a,this.bounds=n}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}evaluate(e){e.try(this.children,null)}destroy(){this.bounds.destroy()}didDestroy(){this.state.env.didDestroy(this.bounds)}}class Na extends Da{constructor(e,t,n,a){super(e,t,n,a),this.type='try',this.tag=this._tag=dt.create(tt)}didInitializeChildren(){this._tag.inner.update(u(this.children))}evaluate(e){e.try(this.children,this)}handleException(){let e=this.state,t=this.bounds,n=this.children,a=this.start,s=this.prev,i=this.next;n.clear();let r=xa.resume(e.env,t,t.reset(e.env)),o=Ra.resume(e,r),d=new Ue;o.execute(a,(t)=>{t.stack=Ha.restore(e.stack),t.updatingOpcodeStack.push(d),t.updateWith(this),t.updatingOpcodeStack.push(n)}),this.prev=s,this.next=i}}class _a{constructor(e,t){this.opcode=e,this.marker=t,this.didInsert=!1,this.didDelete=!1,this.map=e.map,this.updating=e.children}insert(e,t,n,a){let s=this.map,i=this.opcode,r=this.updating,o=null,d=null;a?(d=s[a],o=d.bounds.firstNode()):o=this.marker;let l=i.vmForInsertion(o),p=null,c=i.start;l.execute(c,(a)=>{s[e]=p=a.iterate(n,t),a.updatingOpcodeStack.push(new Ue),a.updateWith(p),a.updatingOpcodeStack.push(p.children)}),r.insertBefore(p,d),this.didInsert=!0}retain(){}move(e,t,n,a){let s=this.map,i=this.updating,r=s[e],o=s[a]||null;a?K(r,o.firstNode()):K(r,this.marker),i.remove(r),i.insertBefore(r,o)}delete(e){let t=this.map,n=t[e];n.didDestroy(),X(n),this.updating.remove(n),delete t[e],this.didDelete=!0}done(){this.opcode.didInitializeChildren(this.didInsert||this.didDelete)}}class Ia extends Da{constructor(e,t,n,a,s){super(e,t,n,a),this.type='list-block',this.map=o(),this.lastIterated=Qe,this.artifacts=s;let i=this._tag=dt.create(tt);this.tag=m([s.tag,i])}didInitializeChildren(e=!0){this.lastIterated=this.artifacts.tag.value(),e&&this._tag.inner.update(u(this.children))}evaluate(e){let t=this.artifacts,n=this.lastIterated;if(!t.tag.validate(n)){let n=this.bounds,a=e.dom,s=a.createComment('');a.insertAfter(n.parentElement(),s,n.lastNode());let i=new _a(this,s),r=new yt({target:i,artifacts:t});r.sync(),this.parentElement().removeChild(s)}super.evaluate(e)}vmForInsertion(e){let t=this.bounds,n=this.state,a=xa.forInitialRender(n.env,{element:t.parentElement(),nextSibling:e});return Ra.resume(n,a)}}class La{constructor(e,t,n){this.vm=e,this.ops=t,this.exceptionHandler=n,this.vm=e,this.ops=t,this.current=t.head()}goto(e){this.current=e}nextStatement(){let e=this.current,t=this.ops;return e&&(this.current=t.nextNode(e)),e}handleException(){this.exceptionHandler&&this.exceptionHandler.handleException()}}class Ma{constructor(e,t,n,a){this.env=e,this.program=t,this.updating=n,this.bounds=a}rerender({alwaysRevalidate:e=!1}={alwaysRevalidate:!1}){let t=this.env,n=this.program,a=this.updating,s=new Ba(t,n,{alwaysRevalidate:e});s.execute(a,this)}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}handleException(){throw'this should never happen'}destroy(){this.bounds.destroy(),X(this.bounds)}}class Ha{constructor(e,t,n){this.stack=e,this.fp=t,this.sp=n}static empty(){return new this([],0,-1)}static restore(e){return new this(e.slice(),0,e.length-1)}push(e){this.stack[++this.sp]=e}dup(e=this.sp){this.push(this.stack[e])}pop(e=1){let t=this.stack[this.sp];return this.sp-=e,t}peek(e=0){return this.stack[this.sp-e]}get(e,t=this.fp){return this.stack[t+e]}set(e,t,n=this.fp){this.stack[n+t]=e}slice(e,t){return this.stack.slice(e,t)}capture(e){let t=this.sp+1;return this.stack.slice(t-e,t)}reset(){this.stack.length=0}toArray(){return this.stack.slice(this.fp,this.sp+1)}}class Ra{constructor(e,t,n,a,s){this.program=e,this.env=t,this.elementStack=s,this.dynamicScopeStack=new Ve,this.scopeStack=new Ve,this.updatingOpcodeStack=new Ve,this.cacheGroups=new Ve,this.listBlockStack=new Ve,this.stack=Ha.empty(),this._pc=-1,this.ra=-1,this.currentOpSize=0,this.s0=null,this.s1=null,this.t0=null,this.t1=null,this.v0=null,this.env=t,this.heap=e.heap,this.constants=e.constants,this.elementStack=s,this.scopeStack.push(n),this.dynamicScopeStack.push(a)}get pc(){return this._pc}set pc(e){!1,this._pc=e}get fp(){return this.stack.fp}set fp(e){this.stack.fp=e}get sp(){return this.stack.sp}set sp(e){this.stack.sp=e}fetch(e){this.stack.push(this[It[e]])}load(e){this[It[e]]=this.stack.pop()}fetchValue(e){return this[It[e]]}loadValue(e,t){this[It[e]]=t}pushFrame(){this.stack.push(this.ra),this.stack.push(this.fp),this.fp=this.sp-1}popFrame(){this.sp=this.fp-1,this.ra=this.stack.get(0),this.fp=this.stack.get(1)}goto(e){let t=this.pc+e-this.currentOpSize;this.pc=t}call(e){this.ra=this.pc,this.pc=this.heap.getaddr(e)}returnTo(e){let t=this.pc+e-this.currentOpSize;this.ra=t}return(){this.pc=this.ra}static initial(e,t,n,a,s,i,r){let o=e.heap.scopesizeof(r),d=ma.root(n,o);let l=new Ra(e,t,d,s,i);return l.pc=l.heap.getaddr(r),l.updatingOpcodeStack.push(new Ue),l}static resume({program:e,env:t,scope:n,dynamicScope:a},s){return new Ra(e,t,n,a,s)}capture(e){return{env:this.env,program:this.program,dynamicScope:this.dynamicScope(),scope:this.scope(),stack:this.stack.capture(e)}}beginCacheGroup(){this.cacheGroups.push(this.updating().tail())}commitCacheGroup(){let e=new Bn('END'),t=this.updating(),n=this.cacheGroups.pop(),a=n?t.nextNode(n):t.head(),s=t.tail(),i=u(new Ge(a,s)),r=new On(i,e);t.insertBefore(r,a),t.append(new Pn(r)),t.append(e)}enter(e){let t=new Ue,n=this.capture(e),a=this.elements().pushUpdatableBlock(),s=new Na(this.heap.gethandle(this.pc),n,a,t);this.didEnter(s)}iterate(e,t){let n=this.stack;n.push(t),n.push(e);let a=this.capture(2),s=this.elements().pushUpdatableBlock();return new Na(this.heap.gethandle(this.pc),a,s,new Ue())}enterItem(e,t){this.listBlock().map[e]=t,this.didEnter(t)}enterList(e){let t=new Ue,n=this.capture(0),a=this.elements().pushBlockList(t),s=this.stack.peek().artifacts,i=this.pc+e-this.currentOpSize,r=this.heap.gethandle(i),o=new Ia(r,n,a,t,s);this.listBlockStack.push(o),this.didEnter(o)}didEnter(e){this.updateWith(e),this.updatingOpcodeStack.push(e.children)}exit(){this.elements().popBlock(),this.updatingOpcodeStack.pop();let e=this.updating().tail();e.didInitializeChildren()}exitList(){this.exit(),this.listBlockStack.pop()}updateWith(e){this.updating().append(e)}listBlock(){return this.listBlockStack.current}updating(){return this.updatingOpcodeStack.current}elements(){return this.elementStack}scope(){return this.scopeStack.current}dynamicScope(){return this.dynamicScopeStack.current}pushChildScope(){this.scopeStack.push(this.scope().child())}pushDynamicScope(){let e=this.dynamicScope().child();return this.dynamicScopeStack.push(e),e}pushRootScope(e,t){let n=ma.sized(e);return t&&n.bindCallerScope(this.scope()),this.scopeStack.push(n),n}pushScope(e){this.scopeStack.push(e)}popScope(){this.scopeStack.pop()}popDynamicScope(){this.dynamicScopeStack.pop()}newDestroyable(e){this.elements().didAddDestroyable(e)}getSelf(){return this.scope().getSelf()}referenceForSymbol(e){return this.scope().getSymbol(e)}execute(e,t){this.pc=this.heap.getaddr(e),t&&t(this);let n;for(;n=this.next(),!n.done;);return n.value}next(){let e,t=this.env,n=this.program,a=this.updatingOpcodeStack,s=this.elementStack,i=this.nextStatement();return null===i?(this.stack.reset(),e={done:!0,value:new Ma(t,n,a.pop(),s.popBlock())}):(Dt.evaluate(this,i,i.type),e={done:!1,value:null}),e}nextStatement(){let e=this.pc,t=this.program;if(-1===e)return null;var n=this.program.opcode(e);let a=n.size,s=this.currentOpSize=a;return this.pc+=s,t.opcode(e)}bindDynamicScope(e){let t=this.dynamicScope();for(let n,a=e.length-1;0<=a;a--)n=this.constants.getString(e[a]),t.set(n,this.stack.pop())}}class Fa{constructor(e){this.vm=e}next(){return this.vm.next()}}let ja=0;class wa{constructor(e,t){this.options=e,this.parsedLayout=t,this.layout=null,this.partial=null;let n=t.block;this.symbols=n.symbols,this.hasEval=n.hasEval,this.statements=n.statements,this.referrer=t.referrer,this.id=t.id||`client-${ja++}`}renderLayout(e){let t=e.env,n=e.self,a=e.dynamicScope;var s=e.args;let i=s===void 0?Sn:s,r=e.builder,o=this.asLayout(),d=o.compile(),l=Ra.initial(this.options.program,t,n,i,a,r,d);return new Fa(l)}asLayout(){return this.layout?this.layout:this.layout=he(this.parsedLayout,this.options,!1)}asPartial(){return this.partial?this.partial:this.partial=he(this.parsedLayout,this.options,!0)}}class za{get(e){return Ua.create(this,e)}}class Va extends za{constructor(){super(...arguments),this._lastRevision=null,this._lastValue=null}value(){let e=this.tag,t=this._lastRevision,n=this._lastValue;return t&&e.validate(t)||(n=this._lastValue=this.compute(),this._lastRevision=e.value()),n}}class Wa extends ut{constructor(){super(...arguments),this.children=o()}get(e){let t=this.children[e];return t||(t=this.children[e]=new Ga(this.inner,e)),t}}class Ua extends Va{static create(e,t){return l(e)?new Ga(e.value(),t):new Ka(e,t)}get(e){return new Ka(this,e)}}class Ga extends Ua{constructor(e,t){super(),this._parentValue=e,this._propertyKey=t,this.tag=C(e,t)}compute(){return this._parentValue[this._propertyKey]}}class Ka extends Ua{constructor(e,t){super();let n=e.tag,a=dt.create(tt);this._parentReference=e,this._parentObjectTag=a,this._propertyKey=t,this.tag=m([n,a])}compute(){let e=this._parentReference,t=this._parentObjectTag,n=this._propertyKey,a=e.value();return t.inner.update(C(a,n)),'string'==typeof a&&'length'===n?a.length:'object'==typeof a&&a?a[n]:void 0}}class Xa extends za{constructor(e){super(),this.tag=st.create(),this._value=e}value(){return this._value}update(e){let t=this._value;e!==t&&(this.tag.inner.dirty(),this._value=e)}}class Ya{constructor(e,t,n){let a=e.ComponentClass,s=e.name;this.args=t;let i={debugName:s,args:this.namedArgsSnapshot()};T(i,n),this.component=a.create(i)}get tag(){return this.args.tag}namedArgsSnapshot(){return Object.freeze(this.args.named.value())}}class Qa{static create(e){return new Qa(e)}constructor(e){this.env=e.env}prepareArgs(){return null}getCapabilities(e){return e.capabilities}getLayout({name:e,layout:t},n){return n.compileTemplate(e,t)}create(e,t,n){let a=x(this.env);return new Ya(t,n.capture(),a)}getSelf(e){return new Wa(e.component)}didCreateElement(){}didRenderLayout(e,t){e.component.bounds=new Bt(t)}didCreate(e){e&&e.component.didInsertElement()}getTag({tag:e}){return e}update(e){e.component.args=e.namedArgsSnapshot()}didUpdateLayout(){}didUpdate({component:e}){e.didUpdate()}getDestructor(e){return e.component}}class Za{constructor(e,t){this.cache=ye,this.inner=null,this.chains=null,this.lastParentValue=ye,this._guid=0,this.tag=nt,this.parent=e,this.property=t}value(){let e=this.lastParentValue,t=this.property,n=this.inner,a=this._parentValue();if(null===a||a===void 0)return this.cache=void 0;if(e===a)n=this.inner;else{let e='object'==typeof a?ss.for(a).referenceTypeFor(t):is;n=this.inner=new e(a,t,this)}return this.cache=n.value()}get(e){let t=this._getChains();return e in t?t[e]:t[e]=new Za(this,e)}label(){return'[reference Direct]'}_getChains(){return this.chains?this.chains:this.chains=o()}_parentValue(){let e=this.parent.value();return this.lastParentValue=e,e}}class Ja{constructor(e){this.chains=o(),this.tag=nt,this.object=e}value(){return this.object}update(e){this.object=e}get(e){let t=this.chains;return e in t?t[e]:t[e]=new Za(this,e)}chainFor(e){let t=this.chains;return e in t?t[e]:null}path(e){return this.referenceFromParts(e.split('.'))}referenceFromParts(e){return e.reduce((e,t)=>e.get(t),this)}label(){return'[reference Root]'}}const qa={destroy(){}};class $a{constructor(e){this.tag=nt,this.parent=e}chain(){return qa}notify(){}value(){return this.parent[this.property]}get(e){return new $a(this.parent[this.property],e)}}class es{constructor(e){this.tag=nt,this.inner=e}update(e){this.inner=e}chain(){return qa}notify(){}value(){return this.inner}referenceFromParts(){throw new Error('Not implemented')}chainFor(){throw new Error('Not implemented')}get(e){return new $a(this.inner,e)}}class ts{constructor(e){this.object=e}root(){return new es(this.object)}}const ns='df8be4c8-4e89-44e2-a8f9-550c8dacdca7',as=Object.hasOwnProperty;class ss{constructor(e,{RootReferenceFactory:t,DefaultPathReferenceFactory:n}){this.references=null,this.slots=null,this.referenceTypes=null,this.propertyMetadata=null,this.object=e,this.RootReferenceFactory=t||Ja,this.DefaultPathReferenceFactory=n||is}static for(e){if(null===e||e===void 0)return new ss(e,{});if(as.call(e,'_meta')&&e._meta)return e._meta;if(!Object.isExtensible(e))return new ts(e);let t=ss;if(e.constructor&&e.constructor[ns]){let n=e.constructor[ns];t=n.InstanceMetaConstructor}else e[ns]&&(t=e[ns].InstanceMetaConstructor);return e._meta=new t(e,{})}static exists(e){return'object'==typeof e&&e._meta}static metadataForProperty(){return null}addReference(e,t){let n=this.references=this.references||o(),a=n[e]=n[e]||new ze;a.add(t)}addReferenceTypeFor(e,t){this.referenceTypes=this.referenceTypes||o(),this.referenceTypes[e]=t}referenceTypeFor(e){return this.referenceTypes?this.referenceTypes[e]||is:is}removeReference(e,t){if(this.references){let n=this.references[e];n.delete(t)}}getReferenceTypes(){return this.referenceTypes=this.referenceTypes||o(),this.referenceTypes}referencesFor(e){return this.references?this.references[e]:null}getSlots(){return this.slots=this.slots||o()}root(){return this.rootCache=this.rootCache||new this.RootReferenceFactory(this.object)}}class is{constructor(e,t){this.tag=nt,this.object=e,this.property=t}value(){return this.object[this.property]}label(){return'[reference Property]'}}class rs{constructor(e,t){this._registry=e,this._resolver=t}register(e,t,n){let a=this._toAbsoluteSpecifier(e);this._registry.register(a,t,n)}registration(e){let t=this._toAbsoluteSpecifier(e);return this._registry.registration(t)}unregister(e){let t=this._toAbsoluteSpecifier(e);this._registry.unregister(t)}registerOption(e,t,n){let a=this._toAbsoluteOrTypeSpecifier(e);this._registry.registerOption(a,t,n)}registeredOption(e,t){let n=this._toAbsoluteOrTypeSpecifier(e);return this._registry.registeredOption(n,t)}registeredOptions(e){let t=this._toAbsoluteOrTypeSpecifier(e);return this._registry.registeredOptions(t)}unregisterOption(e,t){let n=this._toAbsoluteOrTypeSpecifier(e);this._registry.unregisterOption(n,t)}registerInjection(e,t,n){let a=this._toAbsoluteOrTypeSpecifier(e),s=this._toAbsoluteSpecifier(n);this._registry.registerInjection(a,t,s)}registeredInjections(e){let t=this._toAbsoluteOrTypeSpecifier(e);return this._registry.registeredInjections(t)}_toAbsoluteSpecifier(e,t){return this._resolver.identify(e,t)}_toAbsoluteOrTypeSpecifier(e){return be(e)?e:this._toAbsoluteSpecifier(e)}}class os{constructor(e=null){this.bucket=e?a({},e):{}}get(e){return this.bucket[e]}set(e,t){return this.bucket[e]=t}child(){return new os(this.bucket)}}class ds{constructor(e,t){this.position=0,this.array=e,this.keyFor=t}isEmpty(){return 0===this.array.length}next(){let e=this.position,t=this.array,n=this.keyFor;if(e>=t.length)return null;let a=t[e],s=n(a,e);return this.position++,{key:s,value:a,memo:e}}}class ls{constructor(e,t,n){this.position=0,this.keys=e,this.values=t,this.keyFor=n}isEmpty(){return 0===this.keys.length}next(){let e=this.position,t=this.keys,n=this.values,a=this.keyFor;if(e>=t.length)return null;let s=n[e],i=t[e],r=a(s,i);return this.position++,{key:r,value:s,memo:i}}}const ps=new class{isEmpty(){return!0}next(){throw new Error(`Cannot call next() on an empty iterator`)}};class cs{constructor(e,t){this.tag=e.tag,this.ref=e,this.keyFor=t}iterate(){let e=this.ref,t=this.keyFor,n=e.value();if(Array.isArray(n))return 0<n.length?new ds(n,t):ps;if(void 0===n||null===n)return ps;if(void 0!==n.forEach){let e=[];return n.forEach(function(t){e.push(t)}),0<e.length?new ds(e,t):ps}if('object'==typeof n){let e=Object.keys(n);return 0<e.length?new ls(e,e.map((e)=>n[e]),t):ps}throw new Error(`Don't know how to {{#each ${n}}}`)}valueReferenceFor(e){return new Xa(e.value)}updateValueReference(e,t){e.update(t.value)}memoReferenceFor(e){return new Xa(e.memo)}updateMemoReference(e,t){e.update(t.memo)}}const us={};class ms{constructor(){this.strings=[],this.arrays=[],this.tables=[],this.handles=[],this.serializables=[],this.resolved=[],this.floats=[],this.negatives=[]}float(e){let t=this.floats.indexOf(e);return-1<t?t:this.floats.push(e)-1}negative(e){return this.negatives.push(e)-1}string(e){let t=this.strings.indexOf(e);return-1<t?t:this.strings.push(e)-1}stringArray(e){let t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=this.string(e[n]);return this.array(t)}array(e){let t=this.arrays.indexOf(e);return-1<t?t:this.arrays.push(e)-1}table(e){let t=this.tables.indexOf(e);return-1<t?t:this.tables.push(e)-1}handle(e){return this.resolved.push(us),this.handles.push(e)}serializable(e){let t=this.serializables.indexOf(e);return-1<t?t:this.serializables.push(e)-1}toPool(){return{strings:this.strings,arrays:this.arrays,tables:this.tables,handles:this.handles,serializables:this.serializables,floats:this.floats,negatives:this.negatives}}}class fs extends ms{constructor(e,t){super(),this.resolver=e,t&&(this.strings=t.strings,this.arrays=t.arrays,this.tables=t.tables,this.handles=t.handles,this.serializables=t.serializables,this.floats=t.floats,this.negatives=t.negatives,this.resolved=this.handles.map(()=>us))}getFloat(e){return this.floats[e]}getNegative(e){return this.negatives[e]}getString(e){return this.strings[e]}getStringArray(e){let t=this.getArray(e),a=Array(t.length);for(let s,n=0;n<t.length;n++)s=t[n],a[n]=this.getString(s);return a}getArray(e){return this.arrays[e]}getSymbolTable(e){return this.tables[e]}resolveHandle(e){let t=e-1,n=this.resolved[t];if(n===us){let e=this.handles[t];n=this.resolved[t]=this.resolver.resolve(e)}return n}getSerializable(e){return this.serializables[e]}}class gs extends fs{constructor(){super(...arguments),this.others=[]}getOther(e){return this.others[e-1]}other(e){return this.others.push(e)}}class hs{constructor(e){this.heap=e,this.offset=0}get size(){let e=this.heap.getbyaddr(this.offset);return((e&768)>>on)+1}get type(){return this.heap.getbyaddr(this.offset)&255}get op1(){return this.heap.getbyaddr(this.offset+1)}get op2(){return this.heap.getbyaddr(this.offset+2)}get op3(){return this.heap.getbyaddr(this.offset+3)}}var ys;(function(e){e[e.Allocated=0]='Allocated',e[e.Freed=1]='Freed',e[e.Purged=2]='Purged',e[e.Pointer=3]='Pointer'})(ys||(ys={}));const bs=4,vs=1,ks=2,Ss=3;class As{constructor(e){if(this.offset=0,this.handle=0,e){let t=e.buffer,n=e.table,a=e.handle;this.heap=new Uint16Array(t),this.table=n,this.offset=this.heap.length,this.handle=a}else this.heap=new Uint16Array(1048576),this.table=[]}push(e){this.heap[this.offset++]=e}getbyaddr(e){return this.heap[e]}setbyaddr(e,t){this.heap[e]=t}malloc(){this.table.push(this.offset,0,0,0);let e=this.handle;return this.handle+=bs,e}finishMalloc(e,t){let n=this.table[e],a=this.offset;this.table[e+vs]=a-n,this.table[e+ks]=t}size(){return this.offset}getaddr(e){return this.table[e]}gethandle(e){this.table.push(e,0,0,ys.Pointer);let t=this.handle;return this.handle+=bs,t}sizeof(){return-1}scopesizeof(e){return this.table[e+ks]}free(e){this.table[e+Ss]=1}compact(){let e=0,t=this.table,n=this.table.length,a=this.heap;for(let s=0;s<n;s+=bs){let n=t[s],i=t[s+vs],r=t[s+Ss];if(r===ys.Purged)continue;else if(r===ys.Freed)t[s+Ss]=ys.Purged,e+=i;else if(r===ys.Allocated){for(let t=n;t<=s+i;t++)a[t-e]=a[t];t[s]=n-e}else r===ys.Pointer&&(t[s]=n-e)}this.offset-=e}capture(){let e=ve(this.heap,0,this.offset);return{handle:this.handle,table:this.table,buffer:e}}}class Cs{constructor(e=new ms,t=new As){this.constants=e,this.heap=t,this._opcode=new hs(this.heap)}opcode(e){return this._opcode.offset=e,this._opcode}}class xs extends Cs{}class Es{constructor(){this.byName=o(),this.byHandle=o()}hasName(e){return e in this.byName}getHandle(e){return this.byName[e]}hasHandle(e){return e in this.byHandle}getByHandle(e){return this.byHandle[e]}register(e,t,n){this.byHandle[e]=n,this.byName[t]=e}}class Ts{constructor(e,t){this.tag=nt,this.parent=e,this.property=t}value(){return this.parent.value()[this.property]}get(e){return new Ts(this,e)}}class Os{constructor(e,t){this.tag=nt,this.helper=e,this.args=t.capture()}value(){let e=this.helper,t=this.args;return e(t.positional.value(),t.named.value())}get(e){return new Ts(this,e)}}class Ps{constructor(e){this.owner=e,this.handleLookup=[],this.cache={component:new Es,template:new Es,compiledTemplate:new Es,helper:new Es,manager:new Es,modifier:new Es}}setCompileOptions(e){this.templateOptions=e}lookup(e,t){return this.cache[e].hasName(t)?this.cache[e].getHandle(t):null}register(e,t,n){let a=this.cache[e],s=this.handleLookup.length;return this.handleLookup.push(a),this.cache[e].register(s,t,n),s}lookupModifier(e){let t=this.lookup('modifier',e);if(null===t)throw new Error(`Modifier for ${e} not found.`);return t}compileTemplate(e,t){if(!this.cache.compiledTemplate.hasName(e)){let n=this.resolve(t),a=n.block,s=n.meta,i=n.id,r=JSON.parse(a),o=new wa(this.templateOptions,{id:i,block:r,referrer:s}).asLayout(),d={handle:o.compile(),symbolTable:o.symbolTable};return this.register('compiledTemplate',e,d),d}let n=this.lookup('compiledTemplate',e);return this.resolve(n)}registerHelper(e,t){return this.register('helper',e,(e,n)=>new Os(t,n))}registerInternalHelper(e,t){this.register('helper',e,t)}registerComponent(e,t,n,a){let s=this.registerTemplate(t,a),i=this.managerFor(s.meta.managerId),r=new Et(e,i,n,s.handle);return this.register('component',e,r)}lookupComponentHandle(e,t){return this.cache.component.hasName(e)||this.lookupComponent(e,t),this.lookup('component',e,t)}managerFor(e='main'){let t;if(!this.cache.manager.hasName(e)){let n=this.owner.rootName;if(t=this.owner.lookup(`component-manager:/${n}/component-managers/${e}`),!t)throw new Error(`No component manager found for ID ${e}.`);return this.register('manager',e,t),t}let n=this.cache.manager.getHandle(e);return this.cache.manager.getByHandle(n)}registerTemplate(e,t){return{name:e,handle:this.register('template',e,t),meta:t.meta}}lookupComponent(t,n){let a;if(!this.cache.component.hasName(t)){let s=e(this.identifyComponent(t,n),`Could not find the component '${t}'`),i=this.owner.lookup('template',s),r=this.owner.identify('component',s),o=null;o=void 0===r?{create(e){return Ct.create(e)}}:this.owner.factoryFor(r),a=this.registerComponent(t,s,o,i)}else a=this.lookup('component',t,n);return this.resolve(a)}lookupHelper(e,t){if(!this.cache.helper.hasName(e)){let n=this.owner,a=`helper:${e}`,s=t.specifier,i=n.identify(a,s);if(i===void 0)return null;let r=this.owner.lookup(i,t.specifier);return this.registerHelper(e,r)}return this.lookup('helper',e,t)}lookupPartial(){throw new Error('Partials are not available in Glimmer applications.')}resolve(e){let t=this.handleLookup[e];return t.getByHandle(e)}identifyComponent(e,t){let n=this.owner,a=`template:${e}`,s=t.specifier,i=n.identify(a,s);if(i===void 0&&n.identify(`component:${e}`,s))throw new Error(`The component '${e}' is missing a template. All components must have a template. Make sure there is a template.hbs in the component directory.`);return i}}var Bs={id:'j7SGa6Pm',block:'{"symbols":["root"],"statements":[[4,"each",[[22,["roots"]]],[["key"],["id"]],{"statements":[[4,"in-element",[[21,1,["parent"]]],[["guid","nextSibling"],["%cursor:0%",[21,1,["nextSibling"]]]],{"statements":[[1,[26,"component",[[21,1,["component"]]],null],false]],"parameters":[]},null]],"parameters":[1]},null]],"hasEval":false}',meta:{specifier:'template:/-application/application/src/templates/main'}};class Ds{constructor(e){this.resolver=e}getComponentDefinition(e){let t=this.resolver.resolve(e);return n(!!t,`Couldn't find a template for ${e}`),t}getCapabilities(e){let t=this.getComponentDefinition(e),n=t.manager,a=t.state;return n.getCapabilities(a)}getLayout(e){let t=this.getComponentDefinition(e),n=t.manager,a=n.getLayout(t,this.resolver);return{compile(){return a.handle},symbolTable:a.symbolTable}}lookupHelper(e,t){return this.resolver.lookupHelper(e,t)}lookupModifier(e,t){return this.resolver.lookupModifier(e,t)}lookupComponentSpec(e,t){return this.resolver.lookupComponentHandle(e,t)}lookupPartial(e,t){return this.resolver.lookupPartial(e,t)}}class Ns extends ga{static create(e={}){return e.document=e.document||self.document,e.appendOperations=e.appendOperations||new $n(e.document),new Ns(e)}constructor(e){super({appendOperations:e.appendOperations,updateOperations:new qn(e.document||document)}),T(this,x(e));let t=this.resolver=new Ps(x(this)),n=this.program=new xs(new gs(t)),a=new E,s=new Ds(t);this.compileOptions={program:n,macros:a,lookup:s,Builder:cn},this.resolver.setCompileOptions(this.compileOptions),t.registerTemplate('main',Bs),t.registerInternalHelper('action',ke),t.registerHelper('if',(e)=>e[0]?e[1]:e[2]),this.uselessAnchor=e.document.createElement('a')}protocolForURL(e){return this.uselessAnchor.href=e,this.uselessAnchor.protocol}iterableFor(e,t){let n;if(!t)throw new Error('Must specify a key for #each');switch(t){case'@index':n=(e,t)=>t+'';break;case'@primitive':n=(e)=>e+'';break;default:n=(e)=>e[t];}return new cs(e,n)}}class _s{constructor(e){this._roots=[],this._rootsIndex=0,this._initializers=[],this._initialized=!1,this._rendering=!1,this._rendered=!1,this._scheduled=!1,this._notifiers=[],this.rootName=e.rootName,this.resolver=e.resolver,this.document=e.document||'undefined'!=typeof window&&window.document}renderComponent(e,t,n=null){this._roots.push({id:this._rootsIndex++,component:e,parent:t,nextSibling:n}),this.scheduleRerender()}boot(){this.initialize(),this.env=this.lookup(`environment:/${this.rootName}/main/main`),this._render()}scheduleRerender(){this._scheduled||!this._rendered||(this._rendering=!0,this._scheduled=!0,requestAnimationFrame(()=>{this._scheduled=!1,this._rerender(),this._rendering=!1}))}initialize(){this.initRegistry(),this.initContainer()}registerInitializer(e){this._initializers.push(e)}initRegistry(){let e=this._registry=new Ot,t=new rs(this._registry,this.resolver);e.register(`environment:/${this.rootName}/main/main`,Ns),e.registerOption('helper','instantiate',!1),e.registerOption('template','instantiate',!1),e.register(`document:/${this.rootName}/main/main`,this.document),e.registerOption('document','instantiate',!1),e.registerInjection('environment','document',`document:/${this.rootName}/main/main`),e.registerInjection('component-manager','env',`environment:/${this.rootName}/main/main`);let n=this._initializers;for(let e=0;e<n.length;e++)n[e].initialize(t);this._initialized=!0}initContainer(){this._container=new Tt(this._registry,this.resolver),this._container.defaultInjections=()=>{let e={};return T(e,this),e}}get mainLayout(){return ge(Bs).create(this.env.compileOptions)}get templateIterator(){let e=this.env,t=this.mainLayout,n=new Ja({roots:this._roots}),a=new os,s={element:this.document.body,nextSibling:null};return t.renderLayout({env:e,self:n,dynamicScope:a,builder:fe(e,s)})}_rerender(){let e=this.env,t=this._result;if(!t)throw new Error('Cannot re-render before initial render has completed');try{e.begin(),t.rerender(),e.commit(),this._didRender()}catch(e){this._didError(e)}}_render(){let e=this.env,t=this.templateIterator;try{e.begin();let n;do n=t.next();while(!n.done);e.commit(),this._result=n.value,this._didRender()}catch(e){throw this._didError(e),e}}_didRender(){this._rendered=!0;let e=this._notifiers;this._notifiers=[],e.forEach((e)=>e[0]())}_didError(e){let t=this._notifiers;this._notifiers=[],t.forEach((t)=>t[1](e))}identify(e,t){return this.resolver.identify(e,t)}factoryFor(e,t){return this._container.factoryFor(this.identify(e,t))}lookup(e,t){return this._container.lookup(this.identify(e,t))}}class Is{constructor(e,t){this.config=e,this.registry=t}identify(e,t){if(xe(e))return e;let n,a=Pe(e);if(t){let e=Pe(t);if(Ee(e)){Be('Specifier must not include a rootName, collection, or namespace when combined with an absolute referrer',void 0===a.rootName&&void 0===a.collection&&void 0===a.namespace),a.rootName=e.rootName,a.collection=e.collection;let t=this._definitiveCollection(a.type);if(!a.name)return a.namespace=e.namespace,a.name=e.name,this._serializeAndVerify(a);if(a.namespace=e.namespace?e.namespace+'/'+e.name:e.name,De(a)===t&&(n=this._serializeAndVerify(a)))return n;if(t&&(a.namespace+='/-'+t,n=this._serializeAndVerify(a)))return n;a.rootName=a.collection=a.namespace=void 0}else Be('Referrer must either be "absolute" or include a `type` to determine the associated type',e.type),a.collection=this._definitiveCollection(e.type),Be(`'${e.type}' does not have a definitive collection`,a.collection)}if(a.collection||(a.collection=this._definitiveCollection(a.type),Be(`'${a.type}' does not have a definitive collection`,a.collection)),!a.rootName){if(a.rootName=this.config.app.rootName||'app',n=this._serializeAndVerify(a))return n;let e;a.namespace?(e=this.config.addons&&this.config.addons[a.namespace],a.rootName=a.namespace,a.namespace=void 0):(e=this.config.addons&&this.config.addons[a.name],a.rootName=a.name,a.name='main')}return(n=this._serializeAndVerify(a))?n:void 0}retrieve(e){return this.registry.get(e)}resolve(e,t){let n=this.identify(e,t);if(n)return this.retrieve(n)}_definitiveCollection(e){let t=this.config.types[e];return Be(`'${e}' is not a recognized type`,t),t.definitiveCollection}_serializeAndVerify(e){let t=Te(e);if(this.registry.has(t))return t}}class Ls{constructor(e={}){this._entries=e}has(e){return e in this._entries}get(e){return this._entries[e]}}class Ms{constructor(e){this.position=e.position,this.velocity=e.velocity,this.radius=e.size,this.lifeSpan=e.lifeSpan,this.inertia=0.98}destroy(){this.delete=!0}render(e){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x*=this.inertia,this.velocity.y*=this.inertia,this.radius-=0.1,0.1>this.radius&&(this.radius=0.1),0>this.lifeSpan--&&this.destroy();const t=e.context;t.save(),t.translate(this.position.x,this.position.y),t.fillStyle='#ffffff',t.lineWidth=2,t.beginPath(),t.moveTo(0,-this.radius),t.arc(0,0,this.radius,0,2*Me),t.closePath(),t.fill(),t.restore()}}const Hs=new Image;Hs.src='data:image/png;base64,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';class Rs{constructor(e){this.position=e.position,this.velocity={x:Ne(-1.5,1.5),y:Ne(-1.5,1.5)},this.rotation=0,this.rotationSpeed=Ne(-1,1),this.radius=e.size,this.score=5*(80/this.radius),this.create=e.create,this.addScore=e.addScore,this.vertices=Le(8,e.size),this.imageOffset={x:Ne(0.3*-this.radius,0.3*this.radius),y:Ne(0.3*-this.radius,0.3*this.radius)}}destroy(){this.delete=!0,this.addScore(this.score);for(let e=0;e<this.radius;e++){const e=new Ms({lifeSpan:Ne(60,100),size:Ne(1,3),position:{x:this.position.x+Ne(-this.radius/4,this.radius/4),y:this.position.y+Ne(-this.radius/4,this.radius/4)},velocity:{x:Ne(-1.5,1.5),y:Ne(-1.5,1.5)}});this.create(e,'particles')}if(10<this.radius)for(let e,t=0;2>t;t++)e=new Rs({size:this.radius/2,position:{x:Ne(-10,20)+this.position.x,y:Ne(-10,20)+this.position.y},create:this.create.bind(this),addScore:this.addScore.bind(this)}),this.create(e,'asteroids')}render(e){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.rotation+=this.rotationSpeed,360<=this.rotation&&(this.rotation-=360),0>this.rotation&&(this.rotation+=360),this.position.x>e.screen.width+this.radius?this.position.x=-this.radius:this.position.x<-this.radius&&(this.position.x=e.screen.width+this.radius),this.position.y>e.screen.height+this.radius?this.position.y=-this.radius:this.position.y<-this.radius&&(this.position.y=e.screen.height+this.radius);const t=e.context;t.save(),t.translate(this.position.x,this.position.y),t.rotate(this.rotation*Me/180),t.strokeStyle='#FFF',t.lineWidth=2,t.beginPath(),t.moveTo(0,-this.radius);for(let n=1;n<this.vertices.length;n++)t.lineTo(this.vertices[n].x,this.vertices[n].y);t.closePath(),t.clip(),t.drawImage(Hs,1.5*-this.radius+this.imageOffset.x,1.5*-this.radius+this.imageOffset.y,3*this.radius,3*this.radius),t.stroke(),t.restore()}}class Fs{constructor(e){let t=Ie({x:0,y:-20},{x:0,y:0},e.ship.rotation*Me/180);this.position={x:e.ship.position.x+t.x,y:e.ship.position.y+t.y},this.rotation=e.ship.rotation,this.velocity={x:t.x/2+0.7*e.ship.velocity.x,y:t.y/2+0.7*e.ship.velocity.y},this.radius=2}destroy(){this.delete=!0}render(e){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,(0>this.position.x||0>this.position.y||this.position.x>e.screen.width||this.position.y>e.screen.height)&&this.destroy();const t=e.context;t.save(),t.translate(this.position.x,this.position.y),t.rotate(this.rotation*Me/180),t.fillStyle='#FFF',t.lineWidth=0.5,t.beginPath(),t.arc(0,0,2,0,2*Me),t.closePath(),t.fill(),t.restore()}}class js{constructor(e){this.position=e.position,this.velocity=e.velocity,this.radius=e.size,this.lifeSpan=e.lifeSpan,this.inertia=0.98}destroy(){this.delete=!0}render(e){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x*=this.inertia,this.velocity.y*=this.inertia,this.radius-=0.1,0.1>this.radius&&(this.radius=0.1),0>this.lifeSpan--&&this.destroy();const t=e.context;t.save(),t.translate(this.position.x,this.position.y),t.fillStyle='#ffffff',t.lineWidth=2,t.beginPath(),t.moveTo(0,-this.radius),t.arc(0,0,this.radius,0,2*Me),t.closePath(),t.fill(),t.restore()}}class ws{constructor(e){this.position=e.position,this.velocity={x:0,y:0},this.rotation=0,this.rotationSpeed=6,this.speed=0.15,this.inertia=0.99,this.radius=20,this.lastShot=0,this.create=e.create,this.onDie=e.onDie}destroy(){this.delete=!0,this.onDie();for(let e=0;60>e;e++){const e=new js({lifeSpan:Ne(60,100),size:Ne(1,4),position:{x:this.position.x+Ne(-this.radius/4,this.radius/4),y:this.position.y+Ne(-this.radius/4,this.radius/4)},velocity:{x:Ne(-1.5,1.5),y:Ne(-1.5,1.5)}});this.create(e,'particles')}}rotate(e){'LEFT'===e&&(this.rotation-=this.rotationSpeed),'RIGHT'===e&&(this.rotation+=this.rotationSpeed)}accelerate(){this.velocity.x-=He(-this.rotation*Me/180)*this.speed,this.velocity.y-=Re(-this.rotation*Me/180)*this.speed;let e=Ie({x:0,y:-10},{x:0,y:0},(this.rotation-180)*Me/180);const t=new js({lifeSpan:Ne(20,40),size:Ne(1,3),position:{x:this.position.x+e.x+Ne(-2,2),y:this.position.y+e.y+Ne(-2,2)},velocity:{x:e.x/Ne(3,5),y:e.y/Ne(3,5)}});this.create(t,'particles')}render(e){if(e.keys.up&&this.accelerate(),e.keys.left&&this.rotate('LEFT'),e.keys.right&&this.rotate('RIGHT'),e.keys.space&&300<Date.now()-this.lastShot){const e=new Fs({ship:this});this.create(e,'bullets'),this.lastShot=Date.now()}this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x*=this.inertia,this.velocity.y*=this.inertia,360<=this.rotation&&(this.rotation-=360),0>this.rotation&&(this.rotation+=360),this.position.x>e.screen.width?this.position.x=0:0>this.position.x&&(this.position.x=e.screen.width),this.position.y>e.screen.height?this.position.y=0:0>this.position.y&&(this.position.y=e.screen.height);const t=e.context;t.save(),t.translate(this.position.x,this.position.y),t.rotate(this.rotation*Me/180),t.strokeStyle='#ffffff',t.fillStyle='#000000',t.lineWidth=2,t.beginPath(),t.moveTo(0,-15),t.lineTo(10,10),t.lineTo(5,7),t.lineTo(-5,7),t.lineTo(-10,10),t.closePath(),t.fill(),t.stroke(),t.restore()}}var zs=function(e,t,n,a){var s,o=arguments.length,d=3>o?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)d=Reflect.decorate(e,t,n,a);else for(var r=e.length-1;0<=r;r--)(s=e[r])&&(d=(3>o?s(d):3<o?s(t,n,d):s(t,n))||d);return 3<o&&d&&Object.defineProperty(t,n,d),d};const Vs={LEFT:37,RIGHT:39,UP:38,A:65,D:68,W:87,SPACE:32},Ws=3;var Us;(function(e){e[e.Welcome=0]='Welcome',e[e.Running=1]='Running',e[e.GameOver=2]='GameOver'})(Us||(Us={}));class Gs extends Ct{constructor(e){super(e),this.GameState=Us,this.handleResize=()=>{this.state=Object.assign({},this.state,{screen:{width:window.innerWidth,height:window.innerHeight,ratio:window.devicePixelRatio||1}})},this.handleKeyUp=(e)=>{this.handleKeys(!1,e)},this.handleKeyDown=(e)=>{this.handleKeys(!0,e)},this.state={screen:{width:window.innerWidth,height:window.innerHeight,ratio:window.devicePixelRatio||1},context:null,keys:{left:!1,right:!1,up:!1,down:!1,space:!1},asteroidCount:Ws,currentScore:0,topScore:localStorage.topscore||0,gameState:Us.Welcome},this.ship=[],this.asteroids=[],this.bullets=[],this.particles=[]}get gameOverMessage(){return 0>=this.state.currentScore?'0 points... So sad.':this.state.currentScore>=this.state.topScore?'Top score with '+this.state.currentScore+' points. Woo!':this.state.currentScore+' Points though :)'}get canvasSize(){return{width:this.state.screen.width*this.state.screen.ratio,height:this.state.screen.height*this.state.screen.ratio}}handleKeys(e,t){let n=this.state.keys;(t.keyCode===Vs.LEFT||t.keyCode===Vs.A)&&(n.left=e),(t.keyCode===Vs.RIGHT||t.keyCode===Vs.D)&&(n.right=e),(t.keyCode===Vs.UP||t.keyCode===Vs.W)&&(n.up=e),t.keyCode===Vs.SPACE&&(n.space=e),this.state=Object.assign({},this.state,{keys:n})}didInsertElement(){window.addEventListener('keyup',this.handleKeyUp),window.addEventListener('keydown',this.handleKeyDown),window.addEventListener('resize',this.handleResize);const e=this.bounds.firstNode.querySelector('canvas').getContext('2d');this.state=Object.assign({},this.state,{context:e}),requestAnimationFrame(()=>this.update())}willDestroy(){window.removeEventListener('keyup',this.handleKeyUp),window.removeEventListener('keydown',this.handleKeyDown),window.removeEventListener('resize',this.handleResize)}update(){const e=this.state.context;if(e.save(),e.scale(this.state.screen.ratio,this.state.screen.ratio),e.fillStyle='#000',e.globalAlpha=0.4,e.fillRect(0,0,this.state.screen.width,this.state.screen.height),e.globalAlpha=1,!this.asteroids.length){let e=this.state.asteroidCount+1;this.state=Object.assign({},this.state,{asteroidCount:e}),this.generateAsteroids(e)}this.checkCollisionsWith(this.bullets,this.asteroids),this.checkCollisionsWith(this.ship,this.asteroids),this.updateObjects(this.particles,'particles'),this.updateObjects(this.asteroids,'asteroids'),this.updateObjects(this.bullets,'bullets'),this.updateObjects(this.ship,'ship'),e.restore(),requestAnimationFrame(()=>this.update())}addScore(e){this.state.gameState===Us.Running&&(this.state=Object.assign({},this.state,{currentScore:this.state.currentScore+e}))}startGame(){this.state=Object.assign({},this.state,{gameState:Us.Running,currentScore:0,asteroidCount:Ws});let e=new ws({position:{x:this.state.screen.width/2,y:this.state.screen.height/2},create:this.createObject.bind(this),onDie:this.gameOver.bind(this)});this.createObject(e,'ship'),this.asteroids=[],this.generateAsteroids(this.state.asteroidCount)}gameOver(){this.state=Object.assign({},this.state,{gameState:Us.GameOver}),this.state.currentScore>this.state.topScore&&(this.state=Object.assign({},this.state,{topScore:this.state.currentScore}),localStorage.setItem('topscore',this.state.currentScore+''))}generateAsteroids(e){let t=this.ship[0],n=t?t.position:{x:this.state.screen.width/2,y:this.state.screen.height/2};for(let t,a=0;a<e;a++)t=new Rs({size:80,position:{x:_e(0,this.state.screen.width,n.x-60,n.x+60),y:_e(0,this.state.screen.height,n.y-60,n.y+60)},create:this.createObject.bind(this),addScore:this.addScore.bind(this)}),this.createObject(t,'asteroids')}createObject(e,t){'asteroids'===t?this.asteroids.push(e):'ship'===t?this.ship.push(e):'particles'===t?this.particles.push(e):'bullets'===t&&this.bullets.push(e)}updateObjects(e,t){for(let n,a=0;a<e.length;a++)n=e[a],n.delete?this[t].splice(a,1):n.render(this.state)}checkCollisionsWith(e,t){for(let n,s=0;s<e.length;s++){n=e[s];for(let e,a=0;a<t.length;a++)e=t[a],this.checkCollision(n,e)&&(n.destroy(),e.destroy())}}checkCollision(e,t){let n=e.position.x-t.position.x,a=e.position.y-t.position.y,s=Math.sqrt(n*n+a*a);return!!(s<e.radius+t.radius)}}zs([h],Gs.prototype,'state',void 0),zs([h('state')],Gs.prototype,'gameOverMessage',null),zs([h('state')],Gs.prototype,'canvasSize',null);var Ks={"component:/Glimmeroids/components/Glimmeroids":Gs,"template:/Glimmeroids/components/Glimmeroids":{id:'hAf5mLeG',block:'{"symbols":[],"statements":[[6,"div"],[8],[0,"\\n"],[4,"if",[[26,"not",[[26,"eq",[[22,["state","gameState"]],[22,["GameState","Welcome"]]],null]],null]],null,{"statements":[[0,"    "],[6,"div"],[10,"class","title"],[8],[0,"\\n      "],[6,"h1"],[10,"class","logo"],[8],[0,"Glimmeroids"],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[26,"not",[[26,"eq",[[22,["state","gameState"]],[22,["GameState","Running"]]],null]],null]],null,{"statements":[[0,"    "],[6,"div"],[10,"class","message"],[8],[0,"\\n"],[4,"if",[[26,"eq",[[22,["state","gameState"]],[22,["GameState","GameOver"]]],null]],null,{"statements":[[0,"        "],[6,"p"],[8],[0,"Game over, man!"],[9],[0,"\\n        "],[6,"p"],[8],[1,[20,"gameOverMessage"],false],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[6,"h1"],[10,"class","logo"],[8],[0,"Glimmeroids"],[9],[0,"\\n"]],"parameters":[]}],[0,"\\n      "],[6,"button"],[11,"onclick",[26,"action",[[22,["startGame"]]],null],null],[8],[0,"\\n        "],[1,[26,"if",[[26,"eq",[[22,["state","gameState"]],[22,["GameState","GameOver"]]],null],"try again?","start the game"],null],false],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n\\n  "],[6,"span"],[10,"class","score current-score"],[8],[0,"Score: "],[1,[22,["state","currentScore"]],false],[9],[0,"\\n  "],[6,"span"],[10,"class","score top-score"],[8],[0,"Top Score: "],[1,[22,["state","topScore"]],false],[9],[0,"\\n  "],[6,"span"],[10,"class","controls"],[8],[0,"\\n    Use [A][W][D] or [\u2190][\u2191][\u2192] to MOVE"],[6,"br"],[8],[9],[0,"\\n    Use [SPACE] to SHOOT\\n  "],[9],[0,"\\n  "],[6,"canvas"],[11,"width",[22,["canvasSize","width"]],null],[11,"height",[22,["canvasSize","height"]],null],[8],[9],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{specifier:'template:/glimmeroids/components/Glimmeroids'}},"helper:/Glimmeroids/components/eq":function([e,t]){return e===t},"helper:/Glimmeroids/components/if":function([e,t,n]){return e?t:n},"helper:/Glimmeroids/components/not":function([e]){return!e}},Xs={app:{name:'Glimmeroids',rootName:'Glimmeroids'},types:{application:{definitiveCollection:'main'},component:{definitiveCollection:'components'},"component-test":{unresolvable:!0},helper:{definitiveCollection:'components'},"helper-test":{unresolvable:!0},renderer:{definitiveCollection:'main'},template:{definitiveCollection:'components'}},collections:{main:{types:['application','renderer']},components:{group:'ui',types:['component','component-test','template','helper','helper-test'],defaultType:'component',privateCollections:['utils']},styles:{group:'ui',unresolvable:!0},utils:{unresolvable:!0}}};const Ys=new class extends _s{constructor(){let e=new Ls(Ks),t=new Is(Xs,e);super({rootName:Xs.app.rootName,resolver:t})}},Qs=document.getElementById('app');(function(e){St=e})(()=>{Ys.scheduleRerender()}),Ys.registerInitializer({initialize(e){e.register(`component-manager:/${Ys.rootName}/component-managers/main`,Qa)}}),Ys.renderComponent('Glimmeroids',Qs,null),Ys.boot()});